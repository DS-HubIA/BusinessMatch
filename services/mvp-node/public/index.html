<!DOCTYPE html>

<html lang="pt-BR">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>Clube de Neg√≥cios Sebrae - Business Match 2025</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet"/>
<style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --info: #1abc9c;
            --light: #ecf0f1;
            --dark: #34495e;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        header {
            background-color: var(--primary);
            color: white;
            padding: 1rem;
            text-align: center;
            box-shadow: var(--shadow);
            z-index: 10;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            min-height: 70px;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            flex: 1;
            justify-content: center;
        }
        
        .logo {
            font-size: 1.5rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .logo-icon {
            font-size: 1.8rem;
            color: var(--secondary);
        }
        
        .logo span {
            color: var(--secondary);
        }
        
        .logo-subtitle {
            font-size: 0.8rem;
            opacity: 0.8;
            margin-top: 0.2rem;
        }
        
        .user-actions {
            display: flex;
            gap: 1rem;
            margin-right: 3rem;
        }
        
        .btn {
            padding: 0.5rem 1rem;
            border-radius: 20px;
            border: none;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }
        
        .btn-outline {
            background-color: transparent;
            color: white;
            border: 1px solid white;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-info {
            background-color: var(--info);
            color: white;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow);
        }
        
        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            padding: 1rem;
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
            position: relative;
        }
        
        .screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f5f7fa;
            display: none;
            flex-direction: column;
            padding: 1rem;
            overflow-y: auto;
        }
        
        .screen.active {
            display: flex;
        }
        
        .card-container {
            flex: 1;
            position: relative;
            margin: 1rem 0;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            touch-action: pan-y;
        }
        
        .business-card {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: white;
            border-radius: var(--radius);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease, opacity 0.3s ease;
            cursor: grab;
            user-select: none;
            -webkit-user-select: none;
        }
        
        .business-card:active {
            cursor: grabbing;
        }
        
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .business-type {
            background-color: var(--secondary);
            color: white;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .business-type.demanda {
            background-color: var(--warning);
        }
        
        .business-category {
            color: var(--dark);
            font-size: 0.9rem;
        }
        
        .business-image {
            width: 100%;
            height: 200px;
            background-color: #ddd;
            border-radius: var(--radius);
            margin-bottom: 1rem;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
        }
        
        .business-image-placeholder {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            color: #777;
            font-size: 3rem;
        }
        
        .business-image-placeholder span {
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }
        
        .business-title {
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }
        
        .business-description {
            flex: 1;
            margin-bottom: 1rem;
            line-height: 1.4;
            color: #555;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
        }
        
        .business-contact {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            color: #666;
            font-size: 0.9rem;
        }
        
        .business-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .tag {
            background-color: var(--light);
            padding: 0.3rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
        }
        
        .actions {
            display: flex;
            justify-content: center;
            gap: 2rem;
            padding: 1rem 0;
        }
        
        .action-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: var(--shadow);
            cursor: pointer;
            transition: transform 0.2s ease;
        }
        
        .action-btn:active {
            transform: scale(0.95);
        }
        
        .dislike-btn {
            background-color: white;
            color: var(--danger);
        }
        
        .like-btn {
            background-color: white;
            color: var(--success);
        }
        
        .match-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(46, 204, 113, 0.9);
            border-radius: var(--radius);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            color: white;
            z-index: 5;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .match-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .match-icon {
            font-size: 4rem;
            margin-bottom: 1rem;
        }
        
        .match-text {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
        }
        
        .match-actions {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .match-btn {
            padding: 0.7rem 1.5rem;
            border-radius: 24px;
            border: none;
            font-weight: bold;
            cursor: pointer;
        }
        
        .send-message {
            background-color: white;
            color: var(--success);
        }
        
        .schedule-meeting {
            background-color: var(--warning);
            color: white;
        }
        
        .keep-browsing {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }
        
        .navigation {
            display: flex;
            justify-content: space-around;
            padding: 1rem 0;
            border-top: 1px solid #ddd;
            background-color: white;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.3rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 8px;
            transition: background-color 0.2s ease;
        }
        
        .nav-item.active {
            color: var(--secondary);
        }
        
        .nav-item:hover {
            background-color: var(--light);
        }
        
        .nav-icon {
            font-size: 1.3rem;
        }
        
        .nav-text {
            font-size: 0.8rem;
        }
        
        .empty-state {
            text-align: center;
            padding: 2rem;
            color: #777;
        }
        
        .swipe-left {
            transform: translateX(-100%) rotate(-30deg);
            opacity: 0;
        }
        
        .swipe-right {
            transform: translateX(100%) rotate(30deg);
            opacity: 0;
        }
        
        .form-container {
            background-color: white;
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 1rem;
        }
        
        .form-title {
            margin-bottom: 1.5rem;
            text-align: center;
            color: var(--primary);
        }
        
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
            color: var(--dark);
        }
        
        .form-input, .form-select, .form-textarea {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        
        .form-textarea {
            min-height: 100px;
            resize: vertical;
        }
        
        .form-actions {
            display: flex;
            justify-content: space-between;
            margin-top: 1.5rem;
        }
        
        .form-actions.center {
            justify-content: center;
        }
        
        .matches-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .match-item {
            background-color: white;
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: var(--shadow);
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .match-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background-color: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: #777;
            background-size: cover;
            background-position: center;
        }
        
        .match-info {
            flex: 1;
        }
        
        .match-name {
            font-weight: 600;
            margin-bottom: 0.3rem;
        }
        
        .match-business {
            color: #666;
            font-size: 0.9rem;
        }
        
        .match-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .whatsapp-btn {
            background-color: #25D366;
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .schedule-btn {
            background-color: var(--secondary);
            color: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            cursor: pointer;
        }
        
        .profile-header {
            text-align: center;
            margin-bottom: 1.5rem;
        }
        
        .profile-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            background-color: #ddd;
            margin: 0 auto 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #777;
            background-size: cover;
            background-position: center;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .profile-avatar-edit {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            text-align: center;
            padding: 0.3rem;
            font-size: 0.8rem;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .profile-avatar:hover .profile-avatar-edit {
            opacity: 1;
        }
        
        .profile-name {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }
        
        .profile-business {
            color: #666;
            margin-bottom: 1rem;
        }
        
        .profile-section {
            background-color: white;
            border-radius: var(--radius);
            padding: 1rem;
            margin-bottom: 1rem;
            box-shadow: var(--shadow);
        }
        
        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .my-businesses {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .business-item {
            background-color: var(--light);
            border-radius: var(--radius);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .business-item-info h4 {
            margin-bottom: 0.3rem;
        }
        
        .business-item-info p {
            color: #666;
            font-size: 0.9rem;
        }
        
        .business-actions {
            display: flex;
            gap: 0.5rem;
        }
        
        .icon-btn {
            background: none;
            border: none;
            font-size: 1.2rem;
            cursor: pointer;
            color: var(--dark);
        }
        
        .icon-btn.edit {
            color: var(--secondary);
        }
        
        .icon-btn.delete {
            color: var(--danger);
        }
        
        .interests-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .interest-item {
            background-color: white;
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: var(--shadow);
        }
        
        .interest-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .interest-name {
            font-weight: 600;
        }
        
        .interest-date {
            color: #666;
            font-size: 0.8rem;
        }
        
        .interest-business {
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .interest-message {
            font-style: italic;
            color: #777;
            margin-bottom: 0.5rem;
        }
        
        .interest-actions {
            display: flex;
            justify-content: flex-end;
            gap: 0.5rem;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 1rem;
            border-bottom: 1px solid #ddd;
            overflow-x: auto;
        }
        
        .tab {
            padding: 0.7rem 1rem;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .tab.active {
            border-bottom: 3px solid var(--secondary);
            color: var(--secondary);
            font-weight: 600;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .upload-container {
            position: relative;
            margin-bottom: 1rem;
        }
        
        .upload-btn {
            display: block;
            width: 100%;
            padding: 0.8rem;
            background-color: var(--light);
            border: 2px dashed #ccc;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upload-btn:hover {
            background-color: #e0e0e0;
            border-color: var(--secondary);
        }
        
        .upload-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }
        
        .image-preview {
            margin-top: 1rem;
            text-align: center;
        }
        
        .preview-image {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            box-shadow: var(--shadow);
        }
        
        .remove-image {
            margin-top: 0.5rem;
            background-color: var(--danger);
            color: white;
            border: none;
            padding: 0.3rem 0.8rem;
            border-radius: 4px;
            cursor: pointer;
        }
        
        /* Filtros */
        .filters-container {
            background-color: white;
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: var(--shadow);
            margin-bottom: 1rem;
        }
        
        .filter-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .filter-toggle {
            background: none;
            border: none;
            color: var(--secondary);
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .filter-content {
            display: none;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }
        
        .filter-content.active {
            display: grid;
        }
        
        .filter-actions {
            display: flex;
            gap: 1rem;
            margin-top: 1rem;
        }
        
        /* Admin */
        .admin-login {
            position: absolute;
            top: 1rem;
            right: 1rem;
            z-index: 1000;
        }
        
        .admin-login-btn {
            background: transparent;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: background-color 0.2s ease;
        }
        
        .admin-login-btn:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        /* Responsividade */
        @media (max-width: 768px) {
            .logo {
                font-size: 1.2rem;
            }
            
            .user-actions {
                margin-right: 2.5rem;
            }
            
            .business-title {
                font-size: 1.2rem;
            }
            
            .business-description {
                -webkit-line-clamp: 2;
            }
            
            .filter-content {
                grid-template-columns: 1fr;
            }
            
            .match-actions {
                flex-direction: column;
                align-items: center;
            }
            
            .match-btn {
                width: 100%;
                max-width: 200px;
            }
            
            .actions {
                gap: 1rem;
            }
            
            .action-btn {
                width: 50px;
                height: 50px;
                font-size: 1.2rem;
            }
        }
        
        @media (max-width: 480px) {
            header {
                padding: 0.8rem;
            }
            
            .logo {
                font-size: 1rem;
            }
            
            .btn {
                padding: 0.4rem 0.8rem;
                font-size: 0.9rem;
            }
            
            .business-card {
                padding: 1rem;
            }
            
            .business-image {
                height: 150px;
            }
            
            .form-container {
                padding: 1rem;
            }
        }
        
        /* Indicadores de swipe */
        .swipe-indicator {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: bold;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        
        .swipe-like {
            right: 1rem;
            background-color: var(--success);
            color: white;
        }
        
        .swipe-dislike {
            left: 1rem;
            background-color: var(--danger);
            color: white;
        }
        
        .swipe-indicator.active {
            opacity: 1;
        }
        
        /* Loading states */
        .loading {
            opacity: 0.6;
            pointer-events: none;
        }
        
        .pulse {
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        /* Estilos para agendamento */
        .calendar-container {
            background-color: white;
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: var(--shadow);
            margin-bottom: 1rem;
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .calendar-day {
            text-align: center;
            padding: 0.5rem;
            font-weight: bold;
            color: var(--dark);
        }
        
        .calendar-date {
            text-align: center;
            padding: 0.7rem 0.5rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .calendar-date:hover {
            background-color: var(--light);
        }
        
        .calendar-date.selected {
            background-color: var(--secondary);
            color: white;
        }
        
        .calendar-date.disabled {
            color: #ccc;
            cursor: not-allowed;
        }
        
        .calendar-date.disabled:hover {
            background-color: transparent;
        }
        
        .time-slots {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .time-slot {
            padding: 0.7rem;
            text-align: center;
            background-color: var(--light);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .time-slot:hover {
            background-color: #e0e0e0;
        }
        
        .time-slot.selected {
            background-color: var(--secondary);
            color: white;
        }
        
        .meeting-type {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
        }
        
        .meeting-type-option {
            flex: 1;
            text-align: center;
            padding: 1rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .meeting-type-option.selected {
            border-color: var(--secondary);
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .meetings-list {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .meeting-item {
            background-color: white;
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--secondary);
        }
        
        .meeting-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }
        
        .meeting-title {
            font-weight: 600;
            font-size: 1.1rem;
        }
        
        .meeting-date {
            color: #666;
            font-size: 0.9rem;
        }
        
        .meeting-details {
            color: #666;
            margin-bottom: 0.5rem;
        }
        
        .meeting-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }
        
        .meeting-status {
            display: inline-block;
            padding: 0.3rem 0.7rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }
        
        .meeting-status.confirmed {
            background-color: var(--success);
            color: white;
        }
        
        .meeting-status.pending {
            background-color: var(--warning);
            color: white;
        }
        
        .meeting-status.cancelled {
            background-color: var(--danger);
            color: white;
        }
        
        /* Estilos para Admin */
        .admin-panel {
            background-color: white;
            border-radius: var(--radius);
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 1rem;
        }
        
        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .admin-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .admin-actions {
            display: flex;
            gap: 1rem;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            margin-bottom: 1.5rem;
        }
        
        .stat-card {
            background-color: var(--light);
            border-radius: var(--radius);
            padding: 1rem;
            text-align: center;
            box-shadow: var(--shadow);
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary);
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }
        
        .admin-section {
            margin-bottom: 1.5rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary);
        }
        
        .categories-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .category-item {
            background-color: var(--light);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .category-actions {
            display: flex;
            gap: 0.3rem;
        }
        
        .color-picker {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .color-option.selected {
            border-color: var(--dark);
        }
        
        .terms-container {
            background-color: var(--light);
            border-radius: var(--radius);
            padding: 1rem;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }
        
        .terms-content {
            font-size: 0.9rem;
            line-height: 1.4;
        }
        
        .terms-checkbox {
            display: flex;
            align-items: flex-start;
            gap: 0.5rem;
            margin-bottom: 1rem;
        }
        
        .terms-checkbox input {
            margin-top: 0.2rem;
        }
        
        .terms-label {
            font-size: 0.9rem;
        }
        
        .terms-link {
            color: var(--secondary);
            text-decoration: underline;
            cursor: pointer;
        }
        
        .welcome-screen {
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100%;
            padding: 2rem;
        }
        
        .welcome-image {
            width: 200px;
            height: 200px;
            background-color: #ddd;
            border-radius: 50%;
            margin-bottom: 2rem;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 4rem;
            color: #777;
        }
        
        .welcome-title {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 1rem;
            color: var(--primary);
        }
        
        .welcome-subtitle {
            font-size: 1.2rem;
            margin-bottom: 2rem;
            color: #666;
            max-width: 400px;
            line-height: 1.5;
        }
        
        .welcome-actions {
            display: flex;
            gap: 1rem;
        }
        
        .danger-zone {
            background-color: #ffeaea;
            border: 1px solid var(--danger);
            border-radius: var(--radius);
            padding: 1rem;
            margin-top: 2rem;
        }
        
        .danger-zone-title {
            color: var(--danger);
            font-weight: 600;
            margin-bottom: 1rem;
        }
        
        .danger-actions {
            display: flex;
            gap: 1rem;
        }
        
        .profile-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 1rem;
        }
        </style>
        
<style id="login-guard">
  /* garante que o modal some de verdade quando tiver hidden */
  #login[hidden]{ display:none !important; }

  /* overlay + card b√°sicos */
  .modal-overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    display:flex; align-items:center; justify-content:center;
    z-index: 1000;
  }
  .modal-card{
    width:min(92vw, 520px);
    background:#fff; border-radius:16px; padding:20px;
    box-shadow:0 10px 30px rgba(0,0,0,.25);
  }
  .modal-actions{ display:flex; gap:12px; margin-top:14px; }
  .btn{ cursor:pointer; }

  /* estilos dos bot√µes do modal */
  #login .btn.btn-outline{
    background:#fff;
    color: var(--secondary, #1F6FEB);
    border: 1px solid var(--secondary, #1F6FEB);
  }
  #login .btn.btn-primary{
    background: var(--secondary, #1F6FEB);
    color:#fff;
    border: 1px solid var(--secondary, #1F6FEB);
  }

  /* evita zoom no iOS ao focar */
  #login input{ font-size:16px; }
</style>
        
<script id="safe-current-user">(function(){ window.currentUser = window.currentUser || {}; })();</script>

<style id="external-cta-contrast">
  .external-link-btn{
    display:inline-block;
    margin-top:12px;
    border:1px solid var(--secondary, #1F6FEB);
    color: var(--secondary, #1F6FEB);
    background:#fff;
    padding:10px 14px;
    border-radius:999px;
    font-weight:600;
    text-decoration:none;
  }
  .external-link-btn:hover{ filter:brightness(0.95); }
</style>

</head>

<body>
<header>
<div class="logo-container">
<div class="logo">
<i class="fas fa-handshake logo-icon"></i>
<div>
<div>Clube de Neg√≥cios Sebrae</div>
<div class="logo-subtitle">Business Match 2025</div>
</div>
</div>
</div>
<div class="user-actions">
<a class="btn btn-outline" href="#login" id="loginBtn">Entrar</a>
<button class="btn btn-primary" id="registerBtn">Cadastrar</button>
</div>
<div class="admin-login">
<button class="admin-login-btn" id="adminLoginBtn">
<i class="fas fa-cog"></i>
</button>
</div>
</header>
<main>
<!-- Tela de Boas-Vindas -->
<div class="screen active" id="welcomeScreen">
<div class="welcome-screen">
<div class="welcome-image" id="welcomeImage">
<i class="fas fa-handshake"></i>
</div>
<h1 class="welcome-title">Clube de Neg√≥cios Sebrae</h1>
<p class="welcome-subtitle">
                    Conecte oferta e demanda de forma simples e intuitiva. 
                    Encontre oportunidades de neg√≥cio e parceiros comerciais 
                    atrav√©s da plataforma Business Match 2025.
                </p>
<div class="welcome-actions">
<button class="btn btn-primary" id="getStartedBtn">Come√ßar Agora</button>
<button class="btn btn-primary" id="learnMoreBtn">Saiba Mais</button>
</div>
</div>
</div>
<!-- Tela de Oportunidades -->
<div class="screen" id="opportunitiesScreen">
<!-- Filtros -->
<div class="filters-container">
<div class="filter-header">
<h3>Filtros</h3>
<button class="filter-toggle" id="filterToggle">
<i class="fas fa-sliders-h"></i> Filtrar
                    </button>
</div>
<div class="filter-content" id="filterContent">
<div class="form-group">
<label class="form-label" for="filterType">Tipo</label>
<select class="form-select" id="filterType">
<option value="">Todos</option>
<option value="OFERTA">Oferta</option>
<option value="DEMANDA">Demanda</option>
</select>
</div>
<div class="form-group">
<label class="form-label" for="filterCategory">Categoria</label>
<select class="form-select" id="filterCategory">
<option value="">Todas</option>
</select>
</div>
<div class="form-group">
<label class="form-label" for="filterTags">Tags</label>
<input class="form-input" id="filterTags" placeholder="Ex: software, consultoria" type="text"/>
</div>
<div class="form-group">
<label class="form-label" for="filterLocation">Localiza√ß√£o</label>
<input class="form-input" id="filterLocation" placeholder="Cidade ou estado" type="text"/>
</div>
<div class="filter-actions">
<button class="btn btn-outline" id="clearFiltersBtn">Limpar</button>
<button class="btn btn-primary" id="applyFiltersBtn">Aplicar</button>
</div>
</div>
</div>
<div class="card-container">
<div class="swipe-indicator swipe-like">LIKE</div>
<div class="swipe-indicator swipe-dislike">NOPE</div>
<div class="empty-state" id="emptyState">
<h3>Nenhuma oportunidade dispon√≠vel no momento</h3>
<p>Volte mais tarde para novas conex√µes de neg√≥cios</p>
</div>
<div class="match-overlay" id="matchOverlay">
<div class="match-icon">ü§ù</div>
<div class="match-text">Match de Neg√≥cios!</div>
<p>Voc√™ e esta empresa t√™m interesses compat√≠veis</p>
<div class="match-actions">
<button class="match-btn send-message" id="whatsappMatchBtn">
<i class="fab fa-whatsapp"></i> Enviar Mensagem
                        </button>
<button class="match-btn schedule-meeting" id="scheduleMeetingBtn">
<i class="fas fa-calendar-plus"></i> Agendar Reuni√£o
                        </button>
<button class="match-btn keep-browsing">Continuar Navegando</button>
</div>
</div>
</div>
<div class="actions">
<button class="action-btn dislike-btn" id="dislikeBtn">‚úï</button>
<button class="action-btn like-btn" id="likeBtn">‚úì</button>
</div>
</div>
<!-- Tela de Matches -->
<div class="screen" id="matchesScreen">
<h2 class="form-title">Seus Matches</h2>
<div class="matches-list" id="matchesList">
<!-- Matches ser√£o carregados dinamicamente -->
</div>
</div>
<!-- Tela de Mensagens/Interesses -->
<div class="screen" id="interestsScreen">
<h2 class="form-title">Interesses Recebidos</h2>
<div class="interests-list" id="interestsList">
<!-- Interesses ser√£o carregados dinamicamente -->
</div>
</div>
<!-- Tela de Perfil -->
<div class="screen" id="profileScreen">
<div class="profile-header">
<div class="profile-avatar" id="profileAvatar">
<div class="profile-avatar-edit">Alterar Foto</div>
</div>
<h2 class="profile-name" id="profileName">Usu√°rio</h2>
<p class="profile-business" id="profileBusiness">Empresa</p>
<div class="profile-actions">
<button class="btn btn-primary" id="editProfileBtn">Editar Perfil</button>
<button class="btn btn-outline" id="logoutBtn">Sair</button>
</div>
</div>
<div class="tab-container">
<div class="tab active" data-tab="myBusinesses">Meus Neg√≥cios</div>
<div class="tab" data-tab="myInterests">Meus Interesses</div>
<div class="tab" data-tab="myMeetings">Minhas Reuni√µes</div>
</div>
<div class="tab-content active" id="myBusinesses">
<div class="my-businesses" id="myBusinessesList">
<!-- Neg√≥cios do usu√°rio ser√£o carregados dinamicamente -->
</div>
<button class="btn btn-primary" id="addBusinessBtn" style="width: 100%; margin-top: 1rem;">
<i class="fas fa-plus"></i> Adicionar Neg√≥cio
                </button>
</div>
<div class="tab-content" id="myInterests">
<div class="interests-list" id="myInterestsList">
<!-- Interesses do usu√°rio ser√£o carregados dinamicamente -->
</div>
</div>
<div class="tab-content" id="myMeetings">
<div class="meetings-list" id="myMeetingsList">
<!-- Reuni√µes do usu√°rio ser√£o carregados dinamicamente -->
</div>
</div>
<!-- √Årea de perigo - Exclus√£o de conta -->
<div class="danger-zone">
<h3 class="danger-zone-title">√Årea de Perigo</h3>
<p>A√ß√µes nesta √°rea s√£o irrevers√≠veis. Tenha certeza do que est√° fazendo.</p>
<div class="danger-actions">
<button class="btn btn-danger" id="deleteAccountBtn">Excluir Conta Permanentemente</button>
</div>
</div>
</div>
<!-- Tela de Cadastro/Login -->
<div class="screen" id="authScreen">
<div class="form-container">
<h2 class="form-title" id="authTitle">Cadastre-se</h2>
<form id="authForm">
<div class="upload-container">
<div class="upload-btn" id="avatarUploadBtn">
<i class="fas fa-camera"></i> Clique para adicionar foto de perfil
                        </div>
<input accept="image/*" class="upload-input" id="avatarInput" type="file"/>
</div>
<div class="image-preview" id="avatarPreview"></div>
<div class="form-group">
<label class="form-label" for="name">Nome Completo</label>
<input class="form-input" id="name" required="" type="text"/>
</div>
<div class="form-group">
<label class="form-label" for="email">E-mail</label>
<input class="form-input" id="email" required="" type="email"/>
</div>
<div class="form-group">
<label class="form-label" for="phone">WhatsApp</label>
<input class="form-input" id="phone" placeholder="(11) 99999-9999" required="" type="tel"/>
</div>
<div class="form-group">
<label class="form-label" for="company">Empresa</label>
<input class="form-input" id="company" required="" type="text"/>
</div>
<div class="form-group">
<label class="form-label" for="password">Senha</label>
<input class="form-input" id="password" required="" type="password"/>
</div>
<div class="form-group">
<div class="terms-container">
<div class="terms-content" id="termsContent">
<!-- Termos de uso ser√£o carregados dinamicamente -->
</div>
</div>
<div class="terms-checkbox">
<input id="acceptTerms" required="" type="checkbox"/>
<label class="terms-label" for="acceptTerms">
                                Li e aceito os <span class="terms-link" id="viewTerms">Termos de Uso</span> e 
                                <span class="terms-link" id="viewPrivacy">Pol√≠tica de Privacidade</span>
</label>
</div>
</div>
<div class="form-actions">
<button class="btn btn-outline" id="switchAuthMode" type="button">J√° tenho conta</button>
<button class="btn btn-primary" type="submit">Cadastrar</button>
</div>
</form>
</div>
</div>
<!-- Tela de Adicionar Neg√≥cio -->
<div class="screen" id="addBusinessScreen">
<div class="form-container">
<h2 class="form-title">Adicionar Neg√≥cio</h2>
<form id="businessForm">
<div class="form-group">
<label class="form-label" for="businessType">Tipo</label>
<select class="form-select" id="businessType" required="">
<option value="">Selecione...</option>
<option value="OFERTA">Oferta</option>
<option value="DEMANDA">Demanda</option>
</select>
</div>
<div class="form-group">
<label class="form-label" for="businessCategory">Categoria</label>
<select class="form-select" id="businessCategory" required="">
<!-- Categorias ser√£o carregadas dinamicamente -->
</select>
</div>
<div class="form-group">
<label class="form-label" for="businessTitle">T√≠tulo</label>
<input class="form-input" id="businessTitle" required="" type="text"/>
</div>
<div class="form-group">
<label class="form-label" for="businessDescription">Descri√ß√£o</label>
<textarea class="form-textarea" id="businessDescription" required=""></textarea>
</div>
<div class="upload-container">
<div class="upload-btn" id="businessImageUploadBtn">
<i class="fas fa-image"></i> Clique para adicionar imagem do neg√≥cio
                        </div>
<input accept="image/*" class="upload-input" id="businessImageInput" type="file"/>
</div>
<div class="image-preview" id="businessImagePreview"></div>
<div class="form-group">
<label class="form-label" for="businessTags">Tags (separadas por v√≠rgula)</label>
<input class="form-input" id="businessTags" placeholder="Ex: Software, ERP, Gest√£o" type="text"/>
</div>
<div class="form-group">
<label class="form-label" for="businessLocation">Localiza√ß√£o</label>
<input class="form-input" id="businessLocation" placeholder="Cidade, Estado" type="text"/>
</div>
<div class="form-actions">
<button class="btn btn-outline" id="cancelBusinessBtn" type="button">Cancelar</button>
<button class="btn btn-primary" type="submit">Salvar</button>
</div>
</form>
</div>
</div>
<!-- Tela de Agendamento -->
<div class="screen" id="scheduleScreen">
<div class="form-container">
<h2 class="form-title">Agendar Reuni√£o</h2>
<div class="meeting-with">
<div class="match-item">
<div class="match-avatar" id="meetingAvatar"></div>
<div class="match-info">
<div class="match-name" id="meetingName">Nome</div>
<div class="match-business" id="meetingBusiness">Neg√≥cio</div>
</div>
</div>
</div>
<form id="scheduleForm">
<div class="form-group">
<label class="form-label" for="meetingTitle">T√≠tulo da Reuni√£o</label>
<input class="form-input" id="meetingTitle" placeholder="Ex: Apresenta√ß√£o de Proposta" required="" type="text"/>
</div>
<div class="form-group">
<label class="form-label">Tipo de Reuni√£o</label>
<div class="meeting-type">
<div class="meeting-type-option" data-type="presencial">
<i class="fas fa-building"></i>
<div>Presencial</div>
</div>
<div class="meeting-type-option" data-type="online">
<i class="fas fa-video"></i>
<div>Online</div>
</div>
</div>
</div>
<div class="form-group" id="locationGroup">
<label class="form-label" for="meetingLocation">Local da Reuni√£o</label>
<input class="form-input" id="meetingLocation" placeholder="Endere√ßo ou link da reuni√£o" type="text"/>
</div>
<div class="calendar-container">
<div class="calendar-header">
<button class="btn btn-outline" id="prevMonth" type="button">
<i class="fas fa-chevron-left"></i>
</button>
<h3 id="currentMonth">Junho 2023</h3>
<button class="btn btn-outline" id="nextMonth" type="button">
<i class="fas fa-chevron-right"></i>
</button>
</div>
<div class="calendar-grid" id="calendarDays">
<!-- Dias da semana -->
</div>
<div class="calendar-grid" id="calendarDates">
<!-- Datas do m√™s -->
</div>
</div>
<div class="form-group">
<label class="form-label">Hor√°rio</label>
<div class="time-slots" id="timeSlots">
<!-- Hor√°rios dispon√≠veis -->
</div>
</div>
<div class="form-group">
<label class="form-label" for="meetingDescription">Descri√ß√£o (opcional)</label>
<textarea class="form-textarea" id="meetingDescription" placeholder="Detalhes adicionais sobre a reuni√£o"></textarea>
</div>
<div class="form-actions">
<button class="btn btn-outline" id="cancelScheduleBtn" type="button">Cancelar</button>
<button class="btn btn-primary" type="submit">Agendar Reuni√£o</button>
</div>
</form>
</div>
</div>
<!-- Tela de Administra√ß√£o -->
<div class="screen" id="adminScreen">
<div class="admin-panel">
<div class="admin-header">
<h1 class="admin-title">Painel Administrativo</h1>
<div class="admin-actions">
<button class="btn btn-outline" id="logoutAdminBtn">Sair</button>
</div>
</div>
<div class="stats-grid">
<div class="stat-card">
<div class="stat-value" id="usersCount">0</div>
<div class="stat-label">Usu√°rios Cadastrados</div>
</div>
<div class="stat-card">
<div class="stat-value" id="meetingsCount">0</div>
<div class="stat-label">Reuni√µes Agendadas</div>
</div>
<div class="stat-card">
<div class="stat-value" id="whatsappCount">0</div>
<div class="stat-label">Acionamentos WhatsApp</div>
</div>
<div class="stat-card">
<div class="stat-value" id="offersCount">0</div>
<div class="stat-label">Ofertas Cadastradas</div>
</div>
<div class="stat-card">
<div class="stat-value" id="demandsCount">0</div>
<div class="stat-label">Demandas Cadastradas</div>
</div>
<div class="stat-card">
<div class="stat-value" id="matchesCount">0</div>
<div class="stat-label">Matches Realizados</div>
</div>
</div>
<div class="admin-section">
<div class="section-header">
<h2 class="section-title">Gerenciar Categorias</h2>
<button class="btn btn-primary" id="addCategoryBtn">Adicionar Categoria</button>
</div>
<div class="categories-list" id="categoriesList">
<!-- Categorias ser√£o carregadas dinamicamente -->
</div>
</div>
<div class="admin-section">
<div class="section-header">
<h2 class="section-title">Personalizar Cores</h2>
</div>
<div class="color-picker">
<div class="color-option selected" data-color="2c3e50" style="background-color: #2c3e50;"></div>
<div class="color-option" data-color="34495e" style="background-color: #34495e;"></div>
<div class="color-option" data-color="16a085" style="background-color: #16a085;"></div>
<div class="color-option" data-color="27ae60" style="background-color: #27ae60;"></div>
<div class="color-option" data-color="2980b9" style="background-color: #2980b9;"></div>
<div class="color-option" data-color="8e44ad" style="background-color: #8e44ad;"></div>
<div class="color-option" data-color="f39c12" style="background-color: #f39c12;"></div>
<div class="color-option" data-color="d35400" style="background-color: #d35400;"></div>
<div class="color-option" data-color="c0392b" style="background-color: #c0392b;"></div>
</div>
</div>
<div class="admin-section">
<div class="section-header">
<h2 class="section-title">Termos de Uso</h2>
<button class="btn btn-primary" id="editTermsBtn">Editar Termos</button>
</div>
<div class="terms-container">
<div class="terms-content" id="adminTermsContent">
<!-- Termos de uso ser√£o carregados dinamicamente -->
</div>
</div>
</div>
</div>
</div>
</main>
<div class="navigation">
<div class="nav-item active" data-screen="opportunitiesScreen">
<div class="nav-icon"><i class="fas fa-briefcase"></i></div>
<div class="nav-text">Oportunidades</div>
</div>
<div class="nav-item" data-screen="matchesScreen">
<div class="nav-icon"><i class="fas fa-handshake"></i></div>
<div class="nav-text">Matches</div>
</div>
<div class="nav-item" data-screen="interestsScreen">
<div class="nav-icon"><i class="fas fa-heart"></i></div>
<div class="nav-text">Interesses</div>
</div>
<div class="nav-item" data-screen="profileScreen">
<div class="nav-icon"><i class="fas fa-user"></i></div>
<div class="nav-text">Perfil</div>
</div>
</div>
<script>
        // Dados de exemplo para demonstra√ß√£o
        let businessOpportunities = [
            {
                id: 1,
                type: "DEMANDA",
                category: "Tecnologia",
                title: "Sistema de Gest√£o para Varejo",
                description: "Buscamos uma solu√ß√£o de software para gest√£o de estoque, vendas e financeiro para nossa rede de lojas.",
                image: "https://images.unsplash.com/photo-1551288049-bebda4e38f71?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                tags: ["Software", "ERP", "Varejo", "Gest√£o"],
                contact: "Maria Silva",
                phone: "5511999999999",
                userAvatar: "https://images.unsplash.com/photo-1494790108755-2616b612b786?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                location: "S√£o Paulo, SP"
            },
            {
                id: 2,
                type: "OFERTA",
                category: "Marketing",
                title: "Consultoria em Marketing Digital",
                description: "Oferecemos servi√ßos completos de marketing digital para pequenas e m√©dias empresas, incluindo SEO, m√≠dias sociais e Google Ads.",
                image: "https://images.unsplash.com/photo-1460925895917-afdab827c52f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                tags: ["Marketing", "Digital", "Consultoria", "SEO"],
                contact: "Jo√£o Santos",
                phone: "5511888888888",
                userAvatar: "https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                location: "Rio de Janeiro, RJ"
            },
            {
                id: 3,
                type: "OFERTA",
                category: "Consultoria",
                title: "Consultoria Financeira para PMEs",
                description: "Servi√ßos especializados em consultoria financeira, planejamento tribut√°rio e gest√£o de custos para pequenas e m√©dias empresas.",
                image: "https://images.unsplash.com/photo-1554224155-6726b3ff858f?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                tags: ["Financeiro", "Consultoria", "PME", "Tribut√°rio"],
                contact: "Carlos Oliveira",
                phone: "5511777777777",
                userAvatar: "https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                location: "Belo Horizonte, MG"
            },
            {
                id: 4,
                type: "DEMANDA",
                category: "Log√≠stica",
                title: "Solu√ß√£o de Log√≠stica para E-commerce",
                description: "Precisamos de parceiro para gest√£o de estoque, picking, packing e entrega para nosso e-commerce de moda.",
                image: "https://images.unsplash.com/photo-1566576912321-d58ddd7a6088?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                tags: ["Log√≠stica", "E-commerce", "Entregas", "Armazenagem"],
                contact: "Ana Costa",
                phone: "5511666666666",
                userAvatar: "https://images.unsplash.com/photo-1438761681033-6461ffad8d80?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                location: "Curitiba, PR"
            }
        ];

        // Estado da aplica√ß√£o
        let currentUser = null;
        let userMatches = [];
        let userInterests = [];
        let userBusinesses = [];
        let userMeetings = [];
        let currentCardIndex = 0;
        let startX = 0;
        let currentX = 0;
        let isDragging = false;
        let isLoginMode = false;
        let currentMatch = null;
        let avatarFile = null;
        let businessImageFile = null;
        let activeFilters = {};
        
        // Estado do agendamento
        let currentCalendarDate = new Date();
        let selectedDate = null;
        let selectedTime = null;
        let selectedMeetingType = 'online';
        
        // Configura√ß√µes do sistema
        let appSettings = {
            categories: ["Tecnologia", "Marketing", "Consultoria", "Log√≠stica", "Varejo", "Servi√ßos", "Ind√∫stria", "Sa√∫de", "Educa√ß√£o"],
            colors: {
                primary: "#2c3e50",
                secondary: "#3498db",
                success: "#2ecc71",
                danger: "#e74c3c",
                warning: "#f39c12",
                info: "#1abc9c",
                light: "#ecf0f1",
                dark: "#34495e"
            },
            termsOfUse: `TERMOS DE USO DO BUSINESSMATCH

1. ACEITA√á√ÉO DOS TERMOS
Ao acessar e usar o BusinessMatch, voc√™ concorda em cumprir e ser vinculado por estes Termos de Uso.

2. CADASTRO DE USU√ÅRIO
- Voc√™ deve fornecer informa√ß√µes precisas e atualizadas durante o cadastro
- √â proibido criar contas falsas ou usar informa√ß√µes de terceiros sem autoriza√ß√£o
- Voc√™ √© respons√°vel por manter a confidencialidade de sua senha

3. CONDUTA DO USU√ÅRIO
- Respeitar todos os usu√°rios da plataforma
- N√£o publicar conte√∫do ofensivo, discriminat√≥rio ou ilegal
- N√£o usar a plataforma para atividades fraudulentas

4. PROTE√á√ÉO DE DADOS
Seus dados pessoais s√£o protegidos de acordo com nossa Pol√≠tica de Privacidade.

5. PROPRIEDADE INTELECTUAL
Todo o conte√∫do da plataforma √© propriedade do BusinessMatch.

6. LIMITA√á√ÉO DE RESPONSABILIDADE
O BusinessMatch n√£o se responsabiliza por:
- Acordos comerciais entre usu√°rios
- Veracidade das informa√ß√µes publicadas
- Danos decorrentes do uso da plataforma

7. MODIFICA√á√ïES DOS TERMOS
Podemos modificar estes termos a qualquer momento.

Ao clicar em "Aceitar", voc√™ concorda com estes Termos de Uso.`,

            privacyPolicy: `POL√çTICA DE PRIVACIDADE

1. INFORMA√á√ïES COLETADAS
Coletamos informa√ß√µes fornecidas durante o cadastro e uso da plataforma.

2. USO DAS INFORMA√á√ïES
- Melhorar nossos servi√ßos
- Personalizar sua experi√™ncia
- Conectar usu√°rios com interesses compat√≠veis

3. COMPARTILHAMENTO DE DADOS
N√£o vendemos suas informa√ß√µes pessoais. Compartilhamos apenas:
- Com outros usu√°rios para facilitar conex√µes (ap√≥s match)
- Quando exigido por lei

4. SEUS DIREITOS
Voc√™ pode acessar, corrigir ou excluir seus dados a qualquer momento.

5. SEGURAN√áA
Implementamos medidas de seguran√ßa para proteger suas informa√ß√µes.`,
            adminPassword: "admin123"
        };

        // Estat√≠sticas
        let stats = {
            users: 0,
            meetings: 0,
            whatsappCalls: 0,
            offers: 0,
            demands: 0,
            matches: 0
        };

        // Elementos DOM
        const screens = document.querySelectorAll('.screen');
        const navItems = document.querySelectorAll('.nav-item');
        const cardContainer = document.querySelector('.card-container');
        const emptyState = document.getElementById('emptyState');
        const matchOverlay = document.getElementById('matchOverlay');
        const dislikeBtn = document.getElementById('dislikeBtn');
        const likeBtn = document.getElementById('likeBtn');
        const loginBtn = document.getElementById('loginBtn');
        const registerBtn = document.getElementById('registerBtn');
        const adminLoginBtn = document.getElementById('adminLoginBtn');
        
        // Novos elementos de filtros
        const filterToggle = document.getElementById('filterToggle');
        const filterContent = document.getElementById('filterContent');
        const filterType = document.getElementById('filterType');
        const filterCategory = document.getElementById('filterCategory');
        const filterTags = document.getElementById('filterTags');
        const filterLocation = document.getElementById('filterLocation');
        const clearFiltersBtn = document.getElementById('clearFiltersBtn');
        const applyFiltersBtn = document.getElementById('applyFiltersBtn');
        
        // Indicadores de swipe
        const swipeLikeIndicator = document.querySelector('.swipe-like');
        const swipeDislikeIndicator = document.querySelector('.swipe-dislike');

        // Inicializar aplica√ß√£o
        function init() {
            loadAppSettings();
            applyCustomColors();
            loadTerms();
            loadCategories();
            loadFilterCategories();
            
            const savedUser = localStorage.getItem('currentUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                updateUserInterface();
                showScreen('opportunitiesScreen');
            } else {
                showScreen('welcomeScreen');
            }
            
            renderCards();
            setupEventListeners();
            loadUserData();
            initCalendar();
            updateStats();
        }
        
        // Carregar configura√ß√µes do app
        function loadAppSettings() {
            const savedSettings = localStorage.getItem('appSettings');
            if (savedSettings) {
                appSettings = JSON.parse(savedSettings);
            }
        }
        
        // Salvar configura√ß√µes do app
        function saveAppSettings() {
            localStorage.setItem('appSettings', JSON.stringify(appSettings));
        }
        
        // Aplicar cores personalizadas
        function applyCustomColors() {
            const root = document.documentElement;
            root.style.setProperty('--primary', appSettings.colors.primary);
            root.style.setProperty('--secondary', appSettings.colors.secondary);
            root.style.setProperty('--success', appSettings.colors.success);
            root.style.setProperty('--danger', appSettings.colors.danger);
            root.style.setProperty('--warning', appSettings.colors.warning);
            root.style.setProperty('--info', appSettings.colors.info);
            root.style.setProperty('--light', appSettings.colors.light);
            root.style.setProperty('--dark', appSettings.colors.dark);
        }
        
        // Carregar termos de uso
        function loadTerms() {
            const termsContent = document.getElementById('termsContent');
            const adminTermsContent = document.getElementById('adminTermsContent');
            if (termsContent) termsContent.textContent = appSettings.termsOfUse;
            if (adminTermsContent) adminTermsContent.textContent = appSettings.termsOfUse;
        }
        
        // Carregar categorias
        function loadCategories() {
            const businessCategorySelect = document.getElementById('businessCategory');
            if (businessCategorySelect) {
                businessCategorySelect.innerHTML = '<option value="">Selecione...</option>';
                appSettings.categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    businessCategorySelect.appendChild(option);
                });
            }
            renderCategoriesList();
        }
        
        // NOVO: Carregar categorias nos filtros
        function loadFilterCategories() {
            if (filterCategory) {
                filterCategory.innerHTML = '<option value="">Todas</option>';
                appSettings.categories.forEach(category => {
                    const option = document.createElement('option');
                    option.value = category;
                    option.textContent = category;
                    filterCategory.appendChild(option);
                });
            }
        }
        
        // Renderizar lista de categorias no admin
        function renderCategoriesList() {
            const categoriesList = document.getElementById('categoriesList');
            if (!categoriesList) return;
            
            categoriesList.innerHTML = '';
            
            if (appSettings.categories.length === 0) {
                categoriesList.innerHTML = '<div class="empty-state">Nenhuma categoria cadastrada</div>';
                return;
            }
            
            appSettings.categories.forEach(category => {
                const categoryElement = document.createElement('div');
                categoryElement.className = 'category-item';
                categoryElement.innerHTML = `
                    <span>${category}</span>
                    <div class="category-actions">
                        <button class="icon-btn edit" data-category="${category}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="icon-btn delete" data-category="${category}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                categoriesList.appendChild(categoryElement);
            });
            
            // Adicionar event listeners para os bot√µes de editar e excluir
            document.querySelectorAll('.category-actions .edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.currentTarget.dataset.category;
                    const newCategory = prompt('Editar categoria:', category);
                    if (newCategory && newCategory.trim() !== '') {
                        const index = appSettings.categories.indexOf(category);
                        if (index !== -1) {
                            appSettings.categories[index] = newCategory.trim();
                            saveAppSettings();
                            loadCategories();
                            loadFilterCategories();
                            alert('Categoria atualizada com sucesso!');
                        }
                    }
                });
            });
            
            document.querySelectorAll('.category-actions .delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const category = e.currentTarget.dataset.category;
                    if (appSettings.categories.length <= 1) {
                        alert('√â necess√°rio ter pelo menos uma categoria!');
                        return;
                    }
                    
                    if (confirm(`Tem certeza que deseja excluir a categoria "${category}"?`)) {
                        appSettings.categories = appSettings.categories.filter(c => c !== category);
                        saveAppSettings();
                        loadCategories();
                        loadFilterCategories();
                        alert('Categoria exclu√≠da com sucesso!');
                    }
                });
            });
        }
        
        // Atualizar estat√≠sticas
        function updateStats() {
            const users = JSON.parse(localStorage.getItem('users') || '[]');
            const allMeetings = [];
            users.forEach(user => {
                const userMeetings = JSON.parse(localStorage.getItem(`meetings_${user.id}`) || '[]');
                allMeetings.push(...userMeetings);
            });
            
            const allBusinesses = [];
            users.forEach(user => {
                const userBusinesses = JSON.parse(localStorage.getItem(`businesses_${user.id}`) || '[]');
                allBusinesses.push(...userBusinesses);
            });
            
            const allMatches = [];
            users.forEach(user => {
                const userMatches = JSON.parse(localStorage.getItem(`matches_${user.id}`) || '[]');
                allMatches.push(...userMatches);
            });
            
            stats.users = users.length;
            stats.meetings = allMeetings.length;
            stats.whatsappCalls = parseInt(localStorage.getItem('whatsappCalls') || '0');
            stats.offers = allBusinesses.filter(b => b.type === 'OFERTA').length;
            stats.demands = allBusinesses.filter(b => b.type === 'DEMANDA').length;
            stats.matches = allMatches.length;
            
            // Atualizar UI
            const usersCount = document.getElementById('usersCount');
            const meetingsCount = document.getElementById('meetingsCount');
            const whatsappCount = document.getElementById('whatsappCount');
            const offersCount = document.getElementById('offersCount');
            const demandsCount = document.getElementById('demandsCount');
            const matchesCount = document.getElementById('matchesCount');
            
            if (usersCount) usersCount.textContent = stats.users;
            if (meetingsCount) meetingsCount.textContent = stats.meetings;
            if (whatsappCount) whatsappCount.textContent = stats.whatsappCalls;
            if (offersCount) offersCount.textContent = stats.offers;
            if (demandsCount) demandsCount.textContent = stats.demands;
            if (matchesCount) matchesCount.textContent = stats.matches;
        }
        
        // Carregar dados do usu√°rio
        function loadUserData() {
            if (!currentUser) return;
            
            // Carregar matches
            const savedMatches = localStorage.getItem(`matches_${currentUser.id}`);
            if (savedMatches) {
                userMatches = JSON.parse(savedMatches);
                renderMatches();
            }
            
            // Carregar interesses
            const savedInterests = localStorage.getItem(`interests_${currentUser.id}`);
            if (savedInterests) {
                userInterests = JSON.parse(savedInterests);
                renderInterests();
            }
            
            // Carregar neg√≥cios do usu√°rio
            const savedBusinesses = localStorage.getItem(`businesses_${currentUser.id}`);
            if (savedBusinesses) {
                userBusinesses = JSON.parse(savedBusinesses);
                renderUserBusinesses();
            }
            
            // Carregar interesses do usu√°rio
            const savedMyInterests = localStorage.getItem(`myInterests_${currentUser.id}`);
            if (savedMyInterests) {
                const myInterests = JSON.parse(savedMyInterests);
                renderMyInterests(myInterests);
            }
            
            // Carregar reuni√µes do usu√°rio
            const savedMeetings = localStorage.getItem(`meetings_${currentUser.id}`);
            if (savedMeetings) {
                userMeetings = JSON.parse(savedMeetings);
                renderUserMeetings();
            }
        }
        
        // Atualizar interface com base no estado do usu√°rio
        function updateUserInterface() {
            if (currentUser) {
                // Usu√°rio logado
                loginBtn.style.display = 'none';
                registerBtn.style.display = 'none';
                
                // Atualizar perfil
                const profileName = document.getElementById('profileName');
                const profileBusiness = document.getElementById('profileBusiness');
                const profileAvatar = document.getElementById('profileAvatar');
                
                if (profileName) profileName.textContent = currentUser.name;
                if (profileBusiness) profileBusiness.textContent = currentUser.company;
                
                // Atualizar avatar
                if (profileAvatar) {
                    if (currentUser.avatar) {
                        profileAvatar.style.backgroundImage = `url(${currentUser.avatar})`;
                        profileAvatar.innerHTML = '<div class="profile-avatar-edit">Alterar Foto</div>';
                    } else {
                        profileAvatar.style.backgroundImage = '';
                        if (currentUser.name) {
                            profileAvatar.textContent = currentUser.name.charAt(0).toUpperCase();
                            profileAvatar.innerHTML += '<div class="profile-avatar-edit">Alterar Foto</div>';
                        } else {
                            profileAvatar.innerHTML = '<i class="fas fa-user"></i><div class="profile-avatar-edit">Alterar Foto</div>';
                        }
                    }
                }
            } else {
                // Usu√°rio n√£o logado
                loginBtn.style.display = 'inline-block';
                registerBtn.style.display = 'inline-block';
                
                // Redirecionar para tela de boas-vindas se estiver em uma tela que requer login
                const currentScreen = document.querySelector('.screen.active');
                if (currentScreen && currentScreen.id !== 'authScreen' && 
                    currentScreen.id !== 'welcomeScreen') {
                    showScreen('welcomeScreen');
                }
            }
        }
        
        // Renderizar cards na tela
        function renderCards() {
            cardContainer.innerHTML = '';
            emptyState.style.display = 'none';
            
            let opportunitiesToShow = businessOpportunities;
            
            // Aplicar filtros se existirem
            if (Object.keys(activeFilters).some(key => activeFilters[key])) {
                opportunitiesToShow = filterOpportunities(businessOpportunities);
            }
            
            if (opportunitiesToShow.length === 0) {
                emptyState.style.display = 'block';
                return;
            }
            
            // Mostrar apenas os pr√≥ximos 2 cards
            for (let i = currentCardIndex; i < Math.min(currentCardIndex + 2, opportunitiesToShow.length); i++) {
                const opportunity = opportunitiesToShow[i];
                const card = createBusinessCard(opportunity, i === currentCardIndex);
                cardContainer.appendChild(card);
            }
        }
        
        // NOVO: Filtrar oportunidades
        function filterOpportunities(opportunities) {
            return opportunities.filter(opp => {
                if (activeFilters.type && opp.type !== activeFilters.type) return false;
                if (activeFilters.category && opp.category !== activeFilters.category) return false;
                if (activeFilters.tags && !opp.tags.some(tag => 
                    tag.toLowerCase().includes(activeFilters.tags))) return false;
                if (activeFilters.location && (!opp.location || 
                    !opp.location.toLowerCase().includes(activeFilters.location))) return false;
                return true;
            });
        }
        
        // NOVO: Aplicar filtros
        function applyFilters() {
            activeFilters = {
                type: filterType.value,
                category: filterCategory.value,
                tags: filterTags.value.toLowerCase(),
                location: filterLocation.value.toLowerCase()
            };
            
            currentCardIndex = 0;
            renderCards();
        }
        
        // Criar elemento de card
        function createBusinessCard(opportunity, isTop) {
            const card = document.createElement('div');
            card.className = 'business-card';
            card.dataset.id = opportunity.id;
            
            if (!isTop) {
                card.style.zIndex = '1';
            }
            
            const imageContent = opportunity.image ? 
                `style="background-image: url('${opportunity.image}')"` : 
                `<div class="business-image-placeholder">
                    <i class="fas fa-image"></i>
                    <span>Sem imagem</span>
                </div>`;
            
            card.innerHTML = `
                <div class="card-header">
                    <div class="business-type ${opportunity.type.toLowerCase()}">${opportunity.type}</div>
                    <div class="business-category">${opportunity.category}</div>
                </div>
                <div class="business-image" ${imageContent}></div>
                <h3 class="business-title">${opportunity.title}</h3>
                <p class="business-description">${opportunity.description}</p>
                <div class="business-contact">
                    <div class="match-avatar" style="background-image: ${opportunity.userAvatar ? `url('${opportunity.userAvatar}')` : 'none'}">
                        ${!opportunity.userAvatar ? '<i class="fas fa-user"></i>' : ''}
                    </div>
                    <span>${opportunity.contact}</span>
                </div>
                <div class="business-tags">
                    ${opportunity.tags.map(tag => `<span class="tag">${tag}</span>`).join('')}
                </div>
                ${opportunity.location ? `<div class="business-location"><i class="fas fa-map-marker-alt"></i> ${opportunity.location}</div>` : ''}
            `;
            
            return card;
        }
        
        // NOVO: Drag & Drop otimizado
        function startDrag(e) {
            if (!currentUser) {
                showScreen('authScreen');
                return;
            }
            
            const card = getTopCard();
            if (!card) return;
            
            isDragging = true;
            startX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
            currentX = startX;
            
            card.style.transition = 'none';
            card.style.cursor = 'grabbing';
        }
        
        function drag(e) {
            if (!isDragging) return;
            
            const card = getTopCard();
            if (!card) return;
            
            currentX = e.type.includes('mouse') ? e.pageX : e.touches[0].pageX;
            const deltaX = currentX - startX;
            const rotate = deltaX * 0.1;
            
            card.style.transform = `translateX(${deltaX}px) rotate(${rotate}deg)`;
            
            // Mostrar indicadores de swipe
            if (deltaX > 50) {
                swipeLikeIndicator.classList.add('active');
                swipeDislikeIndicator.classList.remove('active');
                card.style.backgroundColor = 'rgba(46, 204, 113, 0.1)';
            } else if (deltaX < -50) {
                swipeDislikeIndicator.classList.add('active');
                swipeLikeIndicator.classList.remove('active');
                card.style.backgroundColor = 'rgba(231, 76, 60, 0.1)';
            } else {
                swipeLikeIndicator.classList.remove('active');
                swipeDislikeIndicator.classList.remove('active');
                card.style.backgroundColor = 'white';
            }
        }
        
        function endDrag() {
            if (!isDragging) return;
            
            const card = getTopCard();
            if (!card) return;
            
            isDragging = false;
            card.style.transition = 'transform 0.3s ease, opacity 0.3s ease';
            card.style.cursor = 'grab';
            
            const deltaX = currentX - startX;
            const threshold = 100;
            
            swipeLikeIndicator.classList.remove('active');
            swipeDislikeIndicator.classList.remove('active');
            
            if (Math.abs(deltaX) > threshold) {
                if (deltaX > 0) {
                    handleSwipe('right');
                } else {
                    handleSwipe('left');
                }
            } else {
                card.style.transform = 'translateX(0) rotate(0)';
                card.style.backgroundColor = 'white';
            }
        }
        
        // Obter o card no topo
        function getTopCard() {
            const cards = document.querySelectorAll('.business-card');
            return cards.length > 0 ? cards[0] : null;
        }
        
        // Processar swipe (like/dislike)
        function handleSwipe(direction) {
            const card = getTopCard();
            if (!card) return;
            
            const opportunityId = parseInt(card.dataset.id);
            const opportunity = businessOpportunities.find(op => op.id === opportunityId);
            
            if (direction === 'right') {
                card.classList.add('swipe-right');
                
                // Registrar interesse
                const interest = {
                    userId: currentUser.id,
                    userName: currentUser.name,
                    userPhone: currentUser.phone,
                    userAvatar: currentUser.avatar,
                    businessId: opportunity.id,
                    businessTitle: opportunity.title,
                    businessType: opportunity.type,
                    businessCategory: opportunity.category,
                    businessPhone: opportunity.phone,
                    date: new Date().toLocaleDateString('pt-BR'),
                    message: "Tenho interesse no seu neg√≥cio!"
                };
                
                // Salvar interesse
                const myInterests = JSON.parse(localStorage.getItem(`myInterests_${currentUser.id}`) || '[]');
                myInterests.push(interest);
                localStorage.setItem(`myInterests_${currentUser.id}`, JSON.stringify(myInterests));
                
                // Adicionar tamb√©m aos interesses do dono do neg√≥cio
                if (opportunity.userId) {
                    const businessOwnerInterests = JSON.parse(localStorage.getItem(`interests_${opportunity.userId}`) || '[]');
                    businessOwnerInterests.push(interest);
                    localStorage.setItem(`interests_${opportunity.userId}`, JSON.stringify(businessOwnerInterests));
                }
                
                // 30% de chance de match (para demonstra√ß√£o)
                if (Math.random() < 0.3) {
                    currentMatch = opportunity;
                    setTimeout(() => {
                        matchOverlay.classList.add('active');
                        
                        // Adicionar aos matches
                        userMatches.push(opportunity);
                        localStorage.setItem(`matches_${currentUser.id}`, JSON.stringify(userMatches));
                        renderMatches();
                        
                        // Atualizar estat√≠sticas
                        updateStats();
                    }, 300);
                } else {
                    setTimeout(nextCard, 300);
                }
            } else {
                card.classList.add('swipe-left');
                setTimeout(nextCard, 300);
            }
        }
        
        // Avan√ßar para o pr√≥ximo card
        function nextCard() {
            currentCardIndex++;
            
            if (currentCardIndex >= businessOpportunities.length) {
                currentCardIndex = 0;
            }
            
            renderCards();
        }
        
        // Renderizar matches
        function renderMatches() {
            const matchesList = document.getElementById('matchesList');
            if (!matchesList) return;
            
            matchesList.innerHTML = '';
            
            if (userMatches.length === 0) {
                matchesList.innerHTML = '<div class="empty-state">Voc√™ ainda n√£o tem matches</div>';
                return;
            }
            
            userMatches.forEach(match => {
                const matchElement = document.createElement('div');
                matchElement.className = 'match-item';
                matchElement.innerHTML = `
                    <div class="match-avatar" style="background-image: ${match.userAvatar ? `url('${match.userAvatar}')` : 'none'}">
                        ${!match.userAvatar ? '<i class="fas fa-user"></i>' : ''}
                    </div>
                    <div class="match-info">
                        <div class="match-name">${match.contact}</div>
                        <div class="match-business">${match.title}</div>
                    </div>
                    <div class="match-actions">
                        <button class="whatsapp-btn" data-phone="${match.phone}" data-title="${match.title}">
                            <i class="fab fa-whatsapp"></i>
                        </button>
                        <button class="schedule-btn" data-match-id="${match.id}">
                            <i class="fas fa-calendar-plus"></i>
                        </button>
                    </div>
                `;
                matchesList.appendChild(matchElement);
            });
            
            // Adicionar event listeners para os bot√µes do WhatsApp
            document.querySelectorAll('.whatsapp-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const phone = e.currentTarget.dataset.phone;
                    const title = e.currentTarget.dataset.title;
                    const message = `Ol√°! Tenho interesse no seu neg√≥cio: ${title}. Podemos conversar?`;
                    const encodedMessage = encodeURIComponent(message);
                    window.open(`https://wa.me/${phone}?text=${encodedMessage}`, '_blank');
                    
                    // Registrar acionamento do WhatsApp
                    let whatsappCalls = parseInt(localStorage.getItem('whatsappCalls') || '0');
                    whatsappCalls++;
                    localStorage.setItem('whatsappCalls', whatsappCalls.toString());
                    updateStats();
                });
            });
            
            // Adicionar event listeners para os bot√µes de agendamento
            document.querySelectorAll('.schedule-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const matchId = parseInt(e.currentTarget.dataset.matchId);
                    const match = userMatches.find(m => m.id === matchId);
                    if (match) {
                        setupScheduleScreen(match);
                        showScreen('scheduleScreen');
                    }
                });
            });
        }
        
        // Renderizar interesses recebidos
        function renderInterests() {
            const interestsList = document.getElementById('interestsList');
            if (!interestsList) return;
            
            interestsList.innerHTML = '';
            
            if (userInterests.length === 0) {
                interestsList.innerHTML = '<div class="empty-state">Voc√™ ainda n√£o recebeu interesses</div>';
                return;
            }
            
            userInterests.forEach(interest => {
                const interestElement = document.createElement('div');
                interestElement.className = 'interest-item';
                interestElement.innerHTML = `
                    <div class="interest-header">
                        <div class="interest-name">${interest.userName}</div>
                        <div class="interest-date">${interest.date}</div>
                    </div>
                    <div class="interest-business">Interessado em: ${interest.businessTitle}</div>
                    <div class="interest-message">"${interest.message}"</div>
                    <div class="interest-actions">
                        <button class="btn btn-primary whatsapp-interest-btn" data-phone="${interest.userPhone}">
                            <i class="fab fa-whatsapp"></i> Responder
                        </button>
                    </div>
                `;
                interestsList.appendChild(interestElement);
            });
            
            // Adicionar event listeners para os bot√µes do WhatsApp
            document.querySelectorAll('.whatsapp-interest-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const phone = e.currentTarget.dataset.phone;
                    const message = `Ol√°! Obrigado pelo interesse no meu neg√≥cio. Podemos conversar?`;
                    const encodedMessage = encodeURIComponent(message);
                    window.open(`https://wa.me/${phone}?text=${encodedMessage}`, '_blank');
                    
                    // Registrar acionamento do WhatsApp
                    let whatsappCalls = parseInt(localStorage.getItem('whatsappCalls') || '0');
                    whatsappCalls++;
                    localStorage.setItem('whatsappCalls', whatsappCalls.toString());
                    updateStats();
                });
            });
        }
        
        // Renderizar interesses do usu√°rio
        function renderMyInterests(interests) {
            const myInterestsList = document.getElementById('myInterestsList');
            if (!myInterestsList) return;
            
            myInterestsList.innerHTML = '';
            
            if (interests.length === 0) {
                myInterestsList.innerHTML = '<div class="empty-state">Voc√™ ainda n√£o demonstrou interesse em nenhum neg√≥cio</div>';
                return;
            }
            
            interests.forEach(interest => {
                const interestElement = document.createElement('div');
                interestElement.className = 'interest-item';
                interestElement.innerHTML = `
                    <div class="interest-header">
                        <div class="interest-name">${interest.businessTitle}</div>
                        <div class="interest-date">${interest.date}</div>
                    </div>
                    <div class="interest-business">${interest.businessType} - ${interest.businessCategory}</div>
                    <div class="interest-actions">
                        <button class="btn btn-primary whatsapp-interest-btn" data-phone="${interest.businessPhone}">
                            <i class="fab fa-whatsapp"></i> Entrar em Contato
                        </button>
                    </div>
                `;
                myInterestsList.appendChild(interestElement);
            });
            
            // Adicionar event listeners para os bot√µes do WhatsApp
            document.querySelectorAll('.whatsapp-interest-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const phone = e.currentTarget.dataset.phone;
                    const message = `Ol√°! Tenho interesse no seu neg√≥cio. Podemos conversar?`;
                    const encodedMessage = encodeURIComponent(message);
                    window.open(`https://wa.me/${phone}?text=${encodedMessage}`, '_blank');
                    
                    // Registrar acionamento do WhatsApp
                    let whatsappCalls = parseInt(localStorage.getItem('whatsappCalls') || '0');
                    whatsappCalls++;
                    localStorage.setItem('whatsappCalls', whatsappCalls.toString());
                    updateStats();
                });
            });
        }
        
        // Renderizar neg√≥cios do usu√°rio
        function renderUserBusinesses() {
            const myBusinessesList = document.getElementById('myBusinessesList');
            if (!myBusinessesList) return;
            
            myBusinessesList.innerHTML = '';
            
            if (userBusinesses.length === 0) {
                myBusinessesList.innerHTML = '<div class="empty-state">Voc√™ ainda n√£o cadastrou nenhum neg√≥cio</div>';
                return;
            }
            
            userBusinesses.forEach(business => {
                const businessElement = document.createElement('div');
                businessElement.className = 'business-item';
                businessElement.innerHTML = `
                    <div class="business-item-info">
                        <h4>${business.title}</h4>
                        <p>${business.type} - ${business.category}</p>
                    </div>
                    <div class="business-actions">
                        <button class="icon-btn edit" data-id="${business.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="icon-btn delete" data-id="${business.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                myBusinessesList.appendChild(businessElement);
            });
            
            // Adicionar event listeners para os bot√µes de editar e excluir
            document.querySelectorAll('.icon-btn.edit').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const businessId = parseInt(e.currentTarget.dataset.id);
                    // Implementar edi√ß√£o (n√£o implementado completamente para simplifica√ß√£o)
                    alert('Funcionalidade de edi√ß√£o n√£o implementada nesta demonstra√ß√£o');
                });
            });
            
            document.querySelectorAll('.icon-btn.delete').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const businessId = parseInt(e.currentTarget.dataset.id);
                    userBusinesses = userBusinesses.filter(b => b.id !== businessId);
                    localStorage.setItem(`businesses_${currentUser.id}`, JSON.stringify(userBusinesses));
                    renderUserBusinesses();
                    
                    // Atualizar estat√≠sticas
                    updateStats();
                });
            });
        }
        
        // Renderizar reuni√µes do usu√°rio
        function renderUserMeetings() {
            const myMeetingsList = document.getElementById('myMeetingsList');
            if (!myMeetingsList) return;
            
            myMeetingsList.innerHTML = '';
            
            if (userMeetings.length === 0) {
                myMeetingsList.innerHTML = '<div class="empty-state">Voc√™ ainda n√£o tem reuni√µes agendadas</div>';
                return;
            }
            
            // Ordenar reuni√µes por data (mais recentes primeiro)
            const sortedMeetings = userMeetings.sort((a, b) => new Date(b.date + ' ' + b.time) - new Date(a.date + ' ' + a.time));
            
            sortedMeetings.forEach(meeting => {
                const meetingElement = document.createElement('div');
                meetingElement.className = 'meeting-item';
                
                const meetingDate = new Date(meeting.date + ' ' + meeting.time);
                const now = new Date();
                const isPast = meetingDate < now;
                
                meetingElement.innerHTML = `
                    <div class="meeting-header">
                        <div class="meeting-title">${meeting.title}</div>
                        <span class="meeting-status ${isPast ? 'confirmed' : 'pending'}">${isPast ? 'Realizada' : 'Agendada'}</span>
                    </div>
                    <div class="meeting-details">
                        <div><strong>Com:</strong> ${meeting.withName}</div>
                        <div><strong>Data:</strong> ${formatDate(meeting.date)} √†s ${meeting.time}</div>
                        <div><strong>Local:</strong> ${meeting.location}</div>
                    </div>
                    ${meeting.description ? `<div class="meeting-description">${meeting.description}</div>` : ''}
                    <div class="meeting-actions">
                        ${!isPast ? `
                            <button class="btn btn-warning cancel-meeting" data-meeting-id="${meeting.id}">
                                <i class="fas fa-times"></i> Cancelar
                            </button>
                        ` : ''}
                    </div>
                `;
                myMeetingsList.appendChild(meetingElement);
            });
            
            // Adicionar event listeners para os bot√µes de cancelar
            document.querySelectorAll('.cancel-meeting').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const meetingId = parseInt(e.currentTarget.dataset.meetingId);
                    if (confirm('Tem certeza que deseja cancelar esta reuni√£o?')) {
                        userMeetings = userMeetings.filter(m => m.id !== meetingId);
                        localStorage.setItem(`meetings_${currentUser.id}`, JSON.stringify(userMeetings));
                        renderUserMeetings();
                        
                        // Atualizar estat√≠sticas
                        updateStats();
                    }
                });
            });
        }
        
        // Inicializar calend√°rio
        function initCalendar() {
            // Dias da semana
            const days = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'S√°b'];
            const calendarDays = document.getElementById('calendarDays');
            if (calendarDays) {
                calendarDays.innerHTML = '';
                days.forEach(day => {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'calendar-day';
                    dayElement.textContent = day;
                    calendarDays.appendChild(dayElement);
                });
            }
            
            // Hor√°rios dispon√≠veis
            const times = ['09:00', '10:00', '11:00', '14:00', '15:00', '16:00', '17:00', '18:00'];
            const timeSlots = document.getElementById('timeSlots');
            if (timeSlots) {
                timeSlots.innerHTML = '';
                times.forEach(time => {
                    const timeElement = document.createElement('div');
                    timeElement.className = 'time-slot';
                    timeElement.textContent = time;
                    timeElement.dataset.time = time;
                    timeElement.addEventListener('click', () => {
                        document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
                        timeElement.classList.add('selected');
                        selectedTime = time;
                    });
                    timeSlots.appendChild(timeElement);
                });
            }
            
            renderCalendar();
        }
        
        // Renderizar calend√°rio
        function renderCalendar() {
            const year = currentCalendarDate.getFullYear();
            const month = currentCalendarDate.getMonth();
            
            // Atualizar t√≠tulo do m√™s
            const monthNames = ['Janeiro', 'Fevereiro', 'Mar√ßo', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            const currentMonthEl = document.getElementById('currentMonth');
            if (currentMonthEl) {
                currentMonthEl.textContent = `${monthNames[month]} ${year}`;
            }
            
            // Limpar datas
            const calendarDates = document.getElementById('calendarDates');
            if (!calendarDates) return;
            
            calendarDates.innerHTML = '';
            
            // Primeiro dia do m√™s
            const firstDay = new Date(year, month, 1);
            // √öltimo dia do m√™s
            const lastDay = new Date(year, month + 1, 0);
            // Dia da semana do primeiro dia (0 = Domingo, 1 = Segunda, ...)
            const firstDayIndex = firstDay.getDay();
            
            // Dias do m√™s anterior (para preencher o in√≠cio)
            const prevMonthLastDay = new Date(year, month, 0).getDate();
            for (let i = firstDayIndex - 1; i >= 0; i--) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date disabled';
                dateElement.textContent = prevMonthLastDay - i;
                calendarDates.appendChild(dateElement);
            }
            
            // Dias do m√™s atual
            const today = new Date();
            for (let i = 1; i <= lastDay.getDate(); i++) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date';
                dateElement.textContent = i;
                
                const currentDate = new Date(year, month, i);
                const isPast = currentDate < today && currentDate.toDateString() !== today.toDateString();
                
                if (isPast) {
                    dateElement.classList.add('disabled');
                } else {
                    dateElement.addEventListener('click', () => {
                        document.querySelectorAll('.calendar-date').forEach(date => date.classList.remove('selected'));
                        dateElement.classList.add('selected');
                        selectedDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(i).padStart(2, '0')}`;
                    });
                }
                
                calendarDates.appendChild(dateElement);
            }
            
            // Preencher o restante do calend√°rio (pr√≥ximo m√™s)
            const totalCells = 42; // 6 semanas * 7 dias
            const remainingCells = totalCells - (firstDayIndex + lastDay.getDate());
            for (let i = 1; i <= remainingCells; i++) {
                const dateElement = document.createElement('div');
                dateElement.className = 'calendar-date disabled';
                dateElement.textContent = i;
                calendarDates.appendChild(dateElement);
            }
        }
        
        // Configurar tela de agendamento
        function setupScheduleScreen(match) {
            // Preencher informa√ß√µes do match
            const meetingName = document.getElementById('meetingName');
            const meetingBusiness = document.getElementById('meetingBusiness');
            const meetingAvatar = document.getElementById('meetingAvatar');
            
            if (meetingName) meetingName.textContent = match.contact;
            if (meetingBusiness) meetingBusiness.textContent = match.title;
            
            if (meetingAvatar) {
                if (match.userAvatar) {
                    meetingAvatar.style.backgroundImage = `url('${match.userAvatar}')`;
                    meetingAvatar.innerHTML = '';
                } else {
                    meetingAvatar.style.backgroundImage = 'none';
                    meetingAvatar.innerHTML = '<i class="fas fa-user"></i>';
                }
            }
            
            // Resetar sele√ß√µes
            selectedDate = null;
            selectedTime = null;
            selectedMeetingType = 'online';
            
            document.querySelectorAll('.calendar-date').forEach(date => date.classList.remove('selected'));
            document.querySelectorAll('.time-slot').forEach(slot => slot.classList.remove('selected'));
            document.querySelectorAll('.meeting-type-option').forEach(opt => opt.classList.remove('selected'));
            const onlineOption = document.querySelector('.meeting-type-option[data-type="online"]');
            if (onlineOption) onlineOption.classList.add('selected');
            
            // Resetar formul√°rio
            const scheduleForm = document.getElementById('scheduleForm');
            if (scheduleForm) scheduleForm.reset();
            
            // Atualizar calend√°rio
            renderCalendar();
        }
        
        // Formatar data para exibi√ß√£o
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }
        
        // Mostrar tela espec√≠fica
        function showScreen(screenId) {
            screens.forEach(screen => {
                screen.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }
        
        // Configurar event listeners
        function setupEventListeners() {
            // Navega√ß√£o
            navItems.forEach(item => {
                item.addEventListener('click', () => {
                    if (!currentUser && item.dataset.screen !== 'opportunitiesScreen') {
                        showScreen('authScreen');
                        return;
                    }
                    
                    navItems.forEach(nav => nav.classList.remove('active'));
                    item.classList.add('active');
                    
                    showScreen(item.dataset.screen);
                });
            });
            
            // Eventos de drag otimizados
            cardContainer.addEventListener('mousedown', startDrag);
            cardContainer.addEventListener('touchstart', startDrag, { passive: true });
            
            document.addEventListener('mousemove', drag);
            document.addEventListener('touchmove', drag, { passive: true });
            
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
            
            // Bot√µes de like/dislike
            dislikeBtn.addEventListener('click', () => handleSwipe('left'));
            likeBtn.addEventListener('click', () => handleSwipe('right'));
            
            // Filtros
            filterToggle.addEventListener('click', () => {
                filterContent.classList.toggle('active');
            });
            
            applyFiltersBtn.addEventListener('click', applyFilters);
            
            clearFiltersBtn.addEventListener('click', () => {
                filterType.value = '';
                filterCategory.value = '';
                filterTags.value = '';
                filterLocation.value = '';
                activeFilters = {};
                currentCardIndex = 0;
                renderCards();
                filterContent.classList.remove('active');
            });
            
            // Tela de boas-vindas
            const getStartedBtn = document.getElementById('getStartedBtn');
            const learnMoreBtn = document.getElementById('learnMoreBtn');
            
            if (getStartedBtn) {
                getStartedBtn.addEventListener('click', () => {
                    showScreen('authScreen');
                });
            }
            
            if (learnMoreBtn) {
                learnMoreBtn.addEventListener('click', () => {
                    alert('A Clube de Neg√≥cios Sebrae - Business Match 2025 √© uma plataforma inovadora que conecta empresas com necessidades complementares. Use o sistema de swipe para encontrar oportunidades de neg√≥cio e agende reuni√µes diretamente pela plataforma.');
                });
            }
            
            // Autentica√ß√£o
            loginBtn.addEventListener('click', () => {
                isLoginMode = true;
                const authTitle = document.getElementById('authTitle');
                const switchAuthMode = document.getElementById('switchAuthMode');
                if (authTitle) authTitle.textContent = 'Entrar';
                if (switchAuthMode) switchAuthMode.textContent = 'Criar uma conta';
                showScreen('authScreen');
            });
            
            registerBtn.addEventListener('click', () => {
                isLoginMode = false;
                const authTitle = document.getElementById('authTitle');
                const switchAuthMode = document.getElementById('switchAuthMode');
                if (authTitle) authTitle.textContent = 'Cadastre-se';
                if (switchAuthMode) switchAuthMode.textContent = 'J√° tenho conta';
                showScreen('authScreen');
            });
            
            adminLoginBtn.addEventListener('click', () => {
                const password = prompt('Digite a senha de administrador:');
                if (password === appSettings.adminPassword) {
                    showScreen('adminScreen');
                    updateStats();
                } else {
                    alert('Senha incorreta!');
                }
            });
            
            const switchAuthMode = document.getElementById('switchAuthMode');
            if (switchAuthMode) {
                switchAuthMode.addEventListener('click', () => {
                    isLoginMode = !isLoginMode;
                    const authTitle = document.getElementById('authTitle');
                    if (isLoginMode) {
                        if (authTitle) authTitle.textContent = 'Entrar';
                        switchAuthMode.textContent = 'Criar uma conta';
                    } else {
                        if (authTitle) authTitle.textContent = 'Cadastre-se';
                        switchAuthMode.textContent = 'J√° tenho conta';
                    }
                });
            }
            
            const authForm = document.getElementById('authForm');
            if (authForm) {
                authForm.addEventListener('submit', handleAuth);
            }
            
            // Termos de uso
            const viewTerms = document.getElementById('viewTerms');
            const viewPrivacy = document.getElementById('viewPrivacy');
            
            if (viewTerms) {
                viewTerms.addEventListener('click', () => {
                    alert(appSettings.termsOfUse);
                });
            }
            
            if (viewPrivacy) {
                viewPrivacy.addEventListener('click', () => {
                    alert(appSettings.privacyPolicy);
                });
            }
            
            // Upload de avatar
            const avatarInput = document.getElementById('avatarInput');
            const profileAvatar = document.getElementById('profileAvatar');
            
            if (avatarInput) {
                avatarInput.addEventListener('change', handleAvatarUpload);
            }
            
            if (profileAvatar) {
                profileAvatar.addEventListener('click', () => {
                    if (currentUser) {
                        avatarInput.click();
                    }
                });
            }
            
            // Upload de imagem do neg√≥cio
            const businessImageInput = document.getElementById('businessImageInput');
            if (businessImageInput) {
                businessImageInput.addEventListener('change', handleBusinessImageUpload);
            }
            
            // Perfil e neg√≥cios
            const editProfileBtn = document.getElementById('editProfileBtn');
            if (editProfileBtn) {
                editProfileBtn.addEventListener('click', () => {
                    // Preencher formul√°rio com dados atuais
                    document.getElementById('name').value = currentUser.name;
                    document.getElementById('email').value = currentUser.email;
                    document.getElementById('phone').value = currentUser.phone;
                    document.getElementById('company').value = currentUser.company;
                    
                    // Mostrar preview do avatar atual
                    const avatarPreview = document.getElementById('avatarPreview');
                    if (currentUser.avatar && avatarPreview) {
                        avatarPreview.innerHTML = `
                            <img src="${currentUser.avatar}" class="preview-image" alt="Avatar atual">
                            <button type="button" class="remove-image" id="removeAvatar">Remover Foto</button>
                        `;
                        document.getElementById('removeAvatar').addEventListener('click', removeAvatar);
                    }
                    
                    isLoginMode = false;
                    const authTitle = document.getElementById('authTitle');
                    const switchAuthMode = document.getElementById('switchAuthMode');
                    if (authTitle) authTitle.textContent = 'Editar Perfil';
                    if (switchAuthMode) switchAuthMode.textContent = 'Cancelar';
                    showScreen('authScreen');
                });
            }
            
            // Logout
            const logoutBtn = document.getElementById('logoutBtn');
            if (logoutBtn) {
                logoutBtn.addEventListener('click', () => {
                    if (confirm('Tem certeza que deseja sair?')) {
                        currentUser = null;
                        localStorage.removeItem('currentUser');
                        updateUserInterface();
                        showScreen('welcomeScreen');
                    }
                });
            }
            
            const addBusinessBtn = document.getElementById('addBusinessBtn');
            if (addBusinessBtn) {
                addBusinessBtn.addEventListener('click', () => {
                    const businessForm = document.getElementById('businessForm');
                    if (businessForm) businessForm.reset();
                    const businessImagePreview = document.getElementById('businessImagePreview');
                    if (businessImagePreview) businessImagePreview.innerHTML = '';
                    businessImageFile = null;
                    showScreen('addBusinessScreen');
                });
            }
            
            const businessForm = document.getElementById('businessForm');
            if (businessForm) {
                businessForm.addEventListener('submit', handleAddBusiness);
            }
            
            const cancelBusinessBtn = document.getElementById('cancelBusinessBtn');
            if (cancelBusinessBtn) {
                cancelBusinessBtn.addEventListener('click', () => showScreen('profileScreen'));
            }
            
            // Bot√µes do match overlay
            const keepBrowsingBtn = document.querySelector('.keep-browsing');
            if (keepBrowsingBtn) {
                keepBrowsingBtn.addEventListener('click', () => {
                    matchOverlay.classList.remove('active');
                    nextCard();
                });
            }
            
            const whatsappMatchBtn = document.getElementById('whatsappMatchBtn');
            if (whatsappMatchBtn) {
                whatsappMatchBtn.addEventListener('click', () => {
                    if (currentMatch) {
                        const phone = currentMatch.phone;
                        const message = `Ol√°! Tenho interesse no seu neg√≥cio: ${currentMatch.title}. Podemos conversar?`;
                        const encodedMessage = encodeURIComponent(message);
                        window.open(`https://wa.me/${phone}?text=${encodedMessage}`, '_blank');
                        
                        // Registrar acionamento do WhatsApp
                        let whatsappCalls = parseInt(localStorage.getItem('whatsappCalls') || '0');
                        whatsappCalls++;
                        localStorage.setItem('whatsappCalls', whatsappCalls.toString());
                        updateStats();
                    }
                    matchOverlay.classList.remove('active');
                    nextCard();
                });
            }
            
            const scheduleMeetingBtn = document.getElementById('scheduleMeetingBtn');
            if (scheduleMeetingBtn) {
                scheduleMeetingBtn.addEventListener('click', () => {
                    if (currentMatch) {
                        setupScheduleScreen(currentMatch);
                        showScreen('scheduleScreen');
                    }
                });
            }
            
            // Tabs
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.dataset.tab;
                    
                    tabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    
                    tabContents.forEach(content => {
                        content.classList.remove('active');
                        if (content.id === tabId) {
                            content.classList.add('active');
                        }
                    });
                });
            });
            
            // Agendamento
            const cancelScheduleBtn = document.getElementById('cancelScheduleBtn');
            if (cancelScheduleBtn) {
                cancelScheduleBtn.addEventListener('click', () => showScreen('opportunitiesScreen'));
            }
            
            const scheduleForm = document.getElementById('scheduleForm');
            if (scheduleForm) {
                scheduleForm.addEventListener('submit', handleScheduleMeeting);
            }
            
            // Tipo de reuni√£o
            const meetingTypeOptions = document.querySelectorAll('.meeting-type-option');
            meetingTypeOptions.forEach(option => {
                option.addEventListener('click', () => {
                    meetingTypeOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    selectedMeetingType = option.dataset.type;
                    
                    // Atualizar placeholder do local
                    const locationInput = document.getElementById('meetingLocation');
                    if (locationInput) {
                        if (selectedMeetingType === 'online') {
                            locationInput.placeholder = 'Link da reuni√£o (Zoom, Google Meet, etc.)';
                        } else {
                            locationInput.placeholder = 'Endere√ßo da reuni√£o';
                        }
                    }
                });
            });
            
            // Navega√ß√£o do calend√°rio
            const prevMonthBtn = document.getElementById('prevMonth');
            const nextMonthBtn = document.getElementById('nextMonth');
            
            if (prevMonthBtn) {
                prevMonthBtn.addEventListener('click', () => {
                    currentCalendarDate.setMonth(currentCalendarDate.getMonth() - 1);
                    renderCalendar();
                });
            }
            
            if (nextMonthBtn) {
                nextMonthBtn.addEventListener('click', () => {
                    currentCalendarDate.setMonth(currentCalendarDate.getMonth() + 1);
                    renderCalendar();
                });
            }
            
            // Administra√ß√£o
            const logoutAdminBtn = document.getElementById('logoutAdminBtn');
            if (logoutAdminBtn) {
                logoutAdminBtn.addEventListener('click', () => {
                    showScreen('welcomeScreen');
                });
            }
            
            const addCategoryBtn = document.getElementById('addCategoryBtn');
            if (addCategoryBtn) {
                addCategoryBtn.addEventListener('click', () => {
                    const newCategory = prompt('Digite o nome da nova categoria:');
                    if (newCategory && newCategory.trim() !== '') {
                        if (appSettings.categories.includes(newCategory.trim())) {
                            alert('Esta categoria j√° existe!');
                            return;
                        }
                        appSettings.categories.push(newCategory.trim());
                        saveAppSettings();
                        loadCategories();
                        loadFilterCategories();
                        alert('Categoria adicionada com sucesso!');
                    }
                });
            }
            
            const colorOptions = document.querySelectorAll('.color-option');
            colorOptions.forEach(option => {
                option.addEventListener('click', () => {
                    const color = option.dataset.color;
                    appSettings.colors.primary = `#${color}`;
                    
                    // Ajustar cores secund√°rias baseadas na cor prim√°ria
                    const hsl = hexToHSL(color);
                    appSettings.colors.secondary = HSLToHex(hsl.h, hsl.s, Math.min(hsl.l + 10, 100));
                    appSettings.colors.dark = HSLToHex(hsl.h, hsl.s, Math.max(hsl.l - 10, 0));
                    
                    saveAppSettings();
                    applyCustomColors();
                    
                    colorOptions.forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });
            
            const editTermsBtn = document.getElementById('editTermsBtn');
            if (editTermsBtn) {
                editTermsBtn.addEventListener('click', () => {
                    const newTerms = prompt('Editar Termos de Uso:', appSettings.termsOfUse);
                    if (newTerms !== null && newTerms.trim() !== '') {
                        appSettings.termsOfUse = newTerms;
                        saveAppSettings();
                        loadTerms();
                        alert('Termos de uso atualizados com sucesso!');
                    }
                });
            }
            
            // Funcionalidades de cancelamento e exclus√£o de conta
            const deleteAccountBtn = document.getElementById('deleteAccountBtn');
            if (deleteAccountBtn) {
                deleteAccountBtn.addEventListener('click', () => {
                    if (confirm('ATEN√á√ÉO CR√çTICA: Ao excluir sua conta, TODOS os seus dados ser√£o permanentemente removidos do sistema, incluindo:\n\n- Seus dados pessoais\n- Seus neg√≥cios cadastrados\n- Seus matches\n- Seus interesses\n- Suas reuni√µes agendadas\n\nEsta a√ß√£o √© IRREVERS√çVEL. Tem certeza que deseja excluir sua conta?')) {
                        // Excluir dados do usu√°rio
                        const userId = currentUser.id;
                        
                        // Remover dados do usu√°rio
                        localStorage.removeItem(`matches_${userId}`);
                        localStorage.removeItem(`interests_${userId}`);
                        localStorage.removeItem(`businesses_${userId}`);
                        localStorage.removeItem(`myInterests_${userId}`);
                        localStorage.removeItem(`meetings_${userId}`);
                        
                        // Remover usu√°rio da lista de usu√°rios
                        const users = JSON.parse(localStorage.getItem('users') || '[]');
                        const updatedUsers = users.filter(u => u.id !== userId);
                        localStorage.setItem('users', JSON.stringify(updatedUsers));
                        
                        // Fazer logout
                        currentUser = null;
                        localStorage.removeItem('currentUser');
                        updateUserInterface();
                        showScreen('welcomeScreen');
                        
                        alert('Sua conta e todos os seus dados foram exclu√≠dos permanentemente do sistema.');
                        
                        // Atualizar estat√≠sticas
                        updateStats();
                    }
                });
            }
        }
        
        // Processar upload de avatar
        function handleAvatarUpload(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        avatarFile = event.target.result;
                        const avatarPreview = document.getElementById('avatarPreview');
                        if (avatarPreview) {
                            avatarPreview.innerHTML = `
                                <img src="${avatarFile}" class="preview-image" alt="Preview do avatar">
                                <button type="button" class="remove-image" id="removeAvatar">Remover Foto</button>
                            `;
                            document.getElementById('removeAvatar').addEventListener('click', removeAvatar);
                        }
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert('Por favor, selecione um arquivo de imagem.');
                }
            }
        }
        
        // Remover avatar
        function removeAvatar() {
            avatarFile = null;
            const avatarPreview = document.getElementById('avatarPreview');
            if (avatarPreview) avatarPreview.innerHTML = '';
            const avatarInput = document.getElementById('avatarInput');
            if (avatarInput) avatarInput.value = '';
        }
        
        // Processar upload de imagem do neg√≥cio
        function handleBusinessImageUpload(e) {
            const file = e.target.files[0];
            if (file) {
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = function(event) {
                        businessImageFile = event.target.result;
                        const businessImagePreview = document.getElementById('businessImagePreview');
                        if (businessImagePreview) {
                            businessImagePreview.innerHTML = `
                                <img src="${businessImageFile}" class="preview-image" alt="Preview da imagem do neg√≥cio">
                                <button type="button" class="remove-image" id="removeBusinessImage">Remover Imagem</button>
                            `;
                            document.getElementById('removeBusinessImage').addEventListener('click', removeBusinessImage);
                        }
                    };
                    reader.readAsDataURL(file);
                } else {
                    alert('Por favor, selecione um arquivo de imagem.');
                }
            }
        }
        
        // Remover imagem do neg√≥cio
        function removeBusinessImage() {
            businessImageFile = null;
            const businessImagePreview = document.getElementById('businessImagePreview');
            if (businessImagePreview) businessImagePreview.innerHTML = '';
            const businessImageInput = document.getElementById('businessImageInput');
            if (businessImageInput) businessImageInput.value = '';
        }
        
        // Processar autentica√ß√£o
        function handleAuth(e) {
            e.preventDefault();
            
            const acceptTerms = document.getElementById('acceptTerms');
            if (!acceptTerms.checked && !isLoginMode) {
                alert('Voc√™ deve aceitar os Termos de Uso para se cadastrar.');
                return;
            }
            
            if (isLoginMode) {
                // Processar login (simula√ß√£o)
                const email = document.getElementById('email').value;
                const password = document.getElementById('password').value;
                
                // Em uma aplica√ß√£o real, isso seria uma chamada API
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                const user = users.find(u => u.email === email && u.password === password);
                
                if (user) {
                    currentUser = user;
                    localStorage.setItem('currentUser', JSON.stringify(currentUser));
                    updateUserInterface();
                    loadUserData();
                    showScreen('opportunitiesScreen');
                    
                    // Ativar a navega√ß√£o de oportunidades
                    navItems.forEach(nav => nav.classList.remove('active'));
                    const opportunitiesNav = document.querySelector('[data-screen="opportunitiesScreen"]');
                    if (opportunitiesNav) opportunitiesNav.classList.add('active');
                } else {
                    alert('E-mail ou senha incorretos!');
                }
            } else {
                // Processar cadastro
                const user = {
                    id: Date.now(),
                    name: document.getElementById('name').value,
                    email: document.getElementById('email').value,
                    phone: document.getElementById('phone').value,
                    company: document.getElementById('company').value,
                    password: document.getElementById('password').value,
                    avatar: avatarFile || null,
                    acceptedTerms: true,
                    acceptedTermsDate: new Date().toISOString()
                };
                
                // Salvar usu√°rio (em uma aplica√ß√£o real, isso seria uma chamada API)
                const users = JSON.parse(localStorage.getItem('users') || '[]');
                users.push(user);
                localStorage.setItem('users', JSON.stringify(users));
                
                currentUser = user;
                localStorage.setItem('currentUser', JSON.stringify(currentUser));
                updateUserInterface();
                showScreen('opportunitiesScreen');
                
                // Ativar a navega√ß√£o de oportunidades
                navItems.forEach(nav => nav.classList.remove('active'));
                const opportunitiesNav = document.querySelector('[data-screen="opportunitiesScreen"]');
                if (opportunitiesNav) opportunitiesNav.classList.add('active');
                
                // Atualizar estat√≠sticas
                updateStats();
            }
        }
        
        // Processar adi√ß√£o de neg√≥cio
        function handleAddBusiness(e) {
            e.preventDefault();
            
            const business = {
                id: Date.now(),
                type: document.getElementById('businessType').value,
                category: document.getElementById('businessCategory').value,
                title: document.getElementById('businessTitle').value,
                description: document.getElementById('businessDescription').value,
                image: businessImageFile || "https://images.unsplash.com/photo-1560472354-b33ff0c44a43?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60",
                tags: document.getElementById('businessTags').value.split(',').map(tag => tag.trim()),
                contact: currentUser.name,
                phone: currentUser.phone,
                userAvatar: currentUser.avatar,
                userId: currentUser.id,
                location: document.getElementById('businessLocation').value || ''
            };
            
            userBusinesses.push(business);
            localStorage.setItem(`businesses_${currentUser.id}`, JSON.stringify(userBusinesses));
            
            // Adicionar tamb√©m √†s oportunidades gerais (em uma aplica√ß√£o real, isso viria do backend)
            businessOpportunities.unshift(business);
            
            renderUserBusinesses();
            showScreen('profileScreen');
            
            // Atualizar estat√≠sticas
            updateStats();
        }
        
        // Processar agendamento de reuni√£o
        function handleScheduleMeeting(e) {
            e.preventDefault();
            
            if (!selectedDate || !selectedTime) {
                alert('Por favor, selecione uma data e hor√°rio para a reuni√£o.');
                return;
            }
            
            const meeting = {
                id: Date.now(),
                title: document.getElementById('meetingTitle').value,
                type: selectedMeetingType,
                location: document.getElementById('meetingLocation').value || (selectedMeetingType === 'online' ? 'Reuni√£o Online' : 'Local a combinar'),
                date: selectedDate,
                time: selectedTime,
                description: document.getElementById('meetingDescription').value,
                withName: document.getElementById('meetingName').textContent,
                withBusiness: document.getElementById('meetingBusiness').textContent,
                withAvatar: currentMatch.userAvatar,
                createdAt: new Date().toISOString()
            };
            
            // Adicionar reuni√£o ao usu√°rio atual
            userMeetings.push(meeting);
            localStorage.setItem(`meetings_${currentUser.id}`, JSON.stringify(userMeetings));
            
            // Em uma aplica√ß√£o real, aqui enviar√≠amos uma notifica√ß√£o para o outro usu√°rio
            alert('Reuni√£o agendada com sucesso!');
            
            // Atualizar estat√≠sticas
            updateStats();
            
            // Voltar para a tela de oportunidades
            showScreen('opportunitiesScreen');
            matchOverlay.classList.remove('active');
            nextCard();
        }
        
        // Fun√ß√µes auxiliares para convers√£o de cores
        function hexToHSL(hex) {
            // Converte hex para RGB
            let r = parseInt(hex.substr(0, 2), 16) / 255;
            let g = parseInt(hex.substr(2, 2), 16) / 255;
            let b = parseInt(hex.substr(4, 2), 16) / 255;
            
            // Encontra min e max valores
            let max = Math.max(r, g, b);
            let min = Math.min(r, g, b);
            let h, s, l = (max + min) / 2;
            
            if (max === min) {
                h = s = 0; // Achromatic
            } else {
                let d = max - min;
                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            
            return {
                h: Math.round(h * 360),
                s: Math.round(s * 100),
                l: Math.round(l * 100)
            };
        }
        
        function HSLToHex(h, s, l) {
            s /= 100;
            l /= 100;
            
            let c = (1 - Math.abs(2 * l - 1)) * s;
            let x = c * (1 - Math.abs((h / 60) % 2 - 1));
            let m = l - c / 2;
            let r = 0, g = 0, b = 0;
            
            if (0 <= h && h < 60) {
                r = c; g = x; b = 0;
            } else if (60 <= h && h < 120) {
                r = x; g = c; b = 0;
            } else if (120 <= h && h < 180) {
                r = 0; g = c; b = x;
            } else if (180 <= h && h < 240) {
                r = 0; g = x; b = c;
            } else if (240 <= h && h < 300) {
                r = x; g = 0; b = c;
            } else if (300 <= h && h < 360) {
                r = c; g = 0; b = x;
            }
            
            r = Math.round((r + m) * 255);
            g = Math.round((g + m) * 255);
            b = Math.round((b + m) * 255);
            
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);
        }

        // Inicializar a aplica√ß√£o
        init();
    </script>
<script src="/app.api.js"></script>
<style id="polimentoCSS">
/* Calend√°rio: evitar estouro de dia/semana */
.calendar .weekday, .weekday { font-size: 12px; line-height: 1.1; }
.calendar th, .calendar .dow { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
/* Bot√µes grandes (garantir contraste) */
.btn.btn-primary { color: #fff; }
/* Modal de filtros fallback */
#filtersModal[hidden] { display: none !important; }
</style>
<script id="polimentoPack">
document.addEventListener('DOMContentLoaded', function(){

  function q(sel){ return document.querySelector(sel); }
  function qa(sel){ return Array.from(document.querySelectorAll(sel)); }
  function onlyDigits(s){ return (s||'').replace(/\D+/g,''); }

  // 1) Entrar ‚Üí Login (link e fallback)
  (function(){
    var btn = document.getElementById('loginBtn') || qa('a,button').find(el => (el.textContent||'').trim().toLowerCase()==='entrar');
    function showLogin(e){
      if(e) e.preventDefault();
      var login = q('#login') || q('#loginSection') || q('[data-section="login"]') || q('.screen-login, .view-login, .login');
      if (login){
        var tab = q('[data-bs-toggle="tab"][href="#login"], [data-toggle="tab"][href="#login"]');
        if (tab){ tab.click(); return; }
        qa('.screen, .view, section[id^="screen-"], [data-section]').forEach(function(s){ if(s!==login) s.style.display='none'; });
        login.style.display=''; login.removeAttribute('hidden');
        try{ login.scrollIntoView({behavior:'smooth',block:'start'}); }catch(_){}
      } else {
        location.hash='#login';
      }
    }
    if (btn){
      btn.addEventListener('click', showLogin, {capture:true});
      if (btn.tagName==='A') btn.setAttribute('href','#login');
    }
    if (location.hash==='#login') showLogin();
  })();

  // 2) Fechar Filtros ao aplicar
  (function(){
    var apply = document.getElementById('applyFiltersBtn') || qa('button').find(b=>/aplicar/i.test(b.textContent||''));
    var modal = document.getElementById('filtersModal') || q('.filters-modal, [data-modal="filters"]');
    if (apply && modal){
      apply.addEventListener('click', function(){
        if (typeof modal.close==='function') modal.close();
        modal.removeAttribute('open');
        modal.setAttribute('hidden','hidden');
        modal.style.display='none';
      });
    }
  })();

  // 3) Bot√£o "Sair" azul (vis√≠vel)
  (function(){
    qa('a,button').filter(b => (b.textContent||'').trim().toLowerCase()==='sair')
      .forEach(function(b){
        b.classList.remove('btn-outline','btn-light');
        b.classList.add('btn','btn-primary');
        b.style.color='#fff';
      });
  })();

  // 4) M√°scaras/obrigat√≥rios: Celular e CNPJ na tela de cadastro
  (function(){
    var f = q('form'); if(!f) return;
    var phone = q('input[name="phone"], #phone, input[type="tel"]');
    var cnpj  = q('input[name="cnpj"], #cnpj');
    var name  = q('input[name="name"], #name');
    var email = q('input[name="email"], #email');
    var pass  = q('input[name="password"], #password');

    [phone, cnpj, name, email, pass].forEach(function(el){ if(el) el.required = true; });

    function maskPhone(v){
      var d = onlyDigits(v).slice(0,11);
      if (d.length>6) return '('+d.slice(0,2)+') '+d.slice(2,7)+'-'+d.slice(7);
      if (d.length>2) return '('+d.slice(0,2)+') '+d.slice(2);
      if (d.length>0) return '('+d;
      return '';
    }
    function maskCNPJ(v){
      var d = onlyDigits(v).slice(0,14);
      var r = '';
      if (d.length>0) r = d.slice(0,2);
      if (d.length>2) r = d.slice(0,2)+'.'+d.slice(2,5);
      if (d.length>5) r = d.slice(0,2)+'.'+d.slice(2,5)+'.'+d.slice(5,8);
      if (d.length>8) r = d.slice(0,2)+'.'+d.slice(2,5)+'.'+d.slice(5,8)+'/'+d.slice(8,12);
      if (d.length>12) r = d.slice(0,2)+'.'+d.slice(2,5)+'.'+d.slice(5,8)+'/'+d.slice(8,12)+'-'+d.slice(12,14);
      return r;
    }
    if (phone){
      phone.inputMode='numeric';
      phone.addEventListener('input', function(){ this.value = maskPhone(this.value); });
    }
    if (cnpj){
      cnpj.inputMode='numeric';
      cnpj.addEventListener('input', function(){ this.value = maskCNPJ(this.value); });
    }

    // Valida√ß√£o m√≠nima no submit
    if (f){
      f.addEventListener('submit', function(e){
        if (email && !(email.value||'').includes('@')){ e.preventDefault(); alert('E-mail inv√°lido'); email.focus(); return; }
        if (phone && onlyDigits(phone.value).length<10){ e.preventDefault(); alert('Celular inv√°lido'); phone.focus(); return; }
        if (cnpj && onlyDigits(cnpj.value).length!==14){ e.preventDefault(); alert('CNPJ inv√°lido'); cnpj.focus(); return; }
        if (pass && (pass.value||'').length<6){ e.preventDefault(); alert('Senha muito curta (m√≠n. 6)'); pass.focus(); return; }
      }, {capture:true});
    }
  })();

  // 5) Swipe no desktop (arrasto) + atalhos do teclado
  (function(){
    var startX=null, down=false;
    function onDown(ev){ down=true; startX=(ev.touches?ev.touches[0].clientX:ev.clientX); }
    function onUp(ev){
      if(!down) return; down=false;
      var x=(ev.changedTouches?ev.changedTouches[0].clientX:ev.clientX);
      var dx=x-startX;
      var yes = document.getElementById('btn-yes') || q('[data-action="yes"], .btn-success, .approve');
      var no  = document.getElementById('btn-no')  || q('[data-action="no"],  .btn-danger, .reject');
      if (dx>60 && yes){ yes.click(); }
      else if (dx<-60 && no){ no.click(); }
    }
    document.addEventListener('mousedown', onDown);
    document.addEventListener('touchstart', onDown, {passive:true});
    document.addEventListener('mouseup', onUp);
    document.addEventListener('touchend', onUp);

    document.addEventListener('keydown', function(e){
      var yes = document.getElementById('btn-yes') || q('[data-action="yes"], .btn-success, .approve');
      var no  = document.getElementById('btn-no')  || q('[data-action="no"],  .btn-danger, .reject');
      if (e.key==='ArrowRight' && yes){ e.preventDefault(); yes.click(); }
      if (e.key==='ArrowLeft'  && no ){ e.preventDefault(); no.click(); }
    });
  })();

});
</script>
<style id="iphoneHeroPatch">
/* escopo s√≥ na home (classe aplicada via JS) */
.iphone-hero-patch .hero-actions{
  display:flex; gap:12px; justify-content:center; align-items:center; flex-wrap:wrap;
}
.iphone-hero-patch .fe-tag{
  display:block; text-align:center; margin:6px auto 2px; font-weight:600; letter-spacing:.2px;
  font-size:14px; opacity:.95;
}
/* iPhone e telas pequenas */
@media (max-width: 480px){
  .iphone-hero-patch h1 { font-size: clamp(22px, 6.2vw, 28px); line-height:1.15; }
  .iphone-hero-patch h2, .iphone-hero-patch .subtitle { font-size: clamp(14px, 4.6vw, 18px); line-height:1.25; }
  .iphone-hero-patch .hero, .iphone-hero-patch .banner, .iphone-hero-patch .container, .iphone-hero-patch header {
    padding-top: 12px !important; padding-bottom: 16px !important;
  }
}
</style>
<script id="iphoneHeroPatch">
document.addEventListener('DOMContentLoaded', function(){
  // aplica s√≥ na home
  if (location.pathname !== '/' && location.pathname !== '' ) return;
  document.body.classList.add('iphone-hero-patch');

  const q  = sel => document.querySelector(sel);
  const qa = sel => Array.from(document.querySelectorAll(sel));
  const textEq = (el, rx) => !!el && rx.test((el.textContent||'').trim().toLowerCase());

  // 1) BOT√ïES lado a lado: "Comece agora" + "Saiba Mais"
  const btnComece = qa('a,button').find(el => textEq(el, /comece agora/));
  const btnSaiba  = q('#learnMoreBtn') || qa('a,button').find(el => textEq(el, /saiba mais/));
  if (btnComece && btnSaiba){
    // cria cont√™iner flex, se ainda n√£o existir
    let actions = q('.hero-actions');
    if (!actions){
      actions = document.createElement('div');
      actions.className = 'hero-actions';
      // tenta posicionar logo abaixo do t√≠tulo principal
      const h1 = qa('h1, .title, .hero-title')[0];
      if (h1 && h1.parentElement) {
        h1.parentElement.appendChild(actions);
      } else {
        // fallback: usa o ancestral comum dos bot√µes
        (btnComece.closest('section,header,div') || btnComece.parentElement).appendChild(actions);
      }
    }
    // move os bot√µes para o cont√™iner (sem clonar)
    if (btnComece.parentElement !== actions) actions.appendChild(btnComece);
    if (btnSaiba.parentElement   !== actions) actions.appendChild(btnSaiba);
  }

  // 2) Inserir a linha "Business Match FE2025" entre H1 e o subt√≠tulo
  const h1 = qa('h1, .title, .hero-title').find(el => /clube de neg[√≥o]cios sebrae/i.test((el.textContent||'')));
  const h2 = qa('h2, .subtitle, p').find(el => /conecte.+ofertas.+demandas/i.test((el.textContent||'')));
  if (h1){
    const tag = document.createElement('div');
    tag.className = 'fe-tag';
    tag.textContent = 'Business Match FE2025';
    if (h2 && h2.parentElement === h1.parentElement){
      h1.insertAdjacentElement('afterend', tag); // exatamente entre h1 e h2
    } else if (h1.parentElement){
      h1.parentElement.insertBefore(tag, h1.nextSibling);
    }
  }

  // 3) Garantir que o bot√£o "Entrar" segue abrindo o Login
  const btnEntrar = q('#loginBtn') || qa('a,button').find(el => textEq(el, /^entrar$/));
  function showLogin(e){
    if (e) e.preventDefault();
    const login = q('#login') || q('#loginSection') || q('[data-section="login"]') || q('.screen-login, .view-login, .login');
    if (login){
      const tab = q('[data-bs-toggle="tab"][href="#login"], [data-toggle="tab"][href="#login"]');
      if (tab){ tab.click(); return; }
      qa('.screen, .view, section[id^="screen-"], [data-section]').forEach(s => { if (s !== login) s.style.display='none'; });
      login.style.display=''; login.removeAttribute('hidden');
      try{ login.scrollIntoView({behavior:'smooth', block:'start'}); }catch(_){}
    } else { location.hash = '#login'; }
  }
  if (btnEntrar){
    btnEntrar.addEventListener('click', showLogin, {capture:true});
    if (btnEntrar.tagName === 'A') btnEntrar.setAttribute('href', '#login');
  }
});
</script>
<style id="homeHeaderCleanCSS">
/* bot√£o externo com boa responsividade */
.home-patch .external-link-btn{
  margin-top:12px; display:inline-block;
}
@media (max-width:480px){
  .home-patch .external-link-btn{
    width:100%; text-align:center;
  }
}
</style>
<script id="homeHeaderCleanJS">
document.addEventListener('DOMContentLoaded',function(){
  // s√≥ na p√°gina inicial
  if (!(location.pathname === '/' || location.pathname === '')) return;
  document.body.classList.add('home-patch');

  // 1) Esconder textos dentro do topo azul (header) ‚Äî s√≥ no index
  const header = document.querySelector('header, .navbar, .app-header, .topbar');
  if (header){
    Array.from(header.querySelectorAll('*')).forEach(el=>{
      const t = (el.textContent||'').trim().toLowerCase();
      if (/clube de neg[√≥o]cios sebrae/.test(t) || /business\s*match/.test(t)){
        el.style.display = 'none';
      }
    });
  }

  // 2) Bot√£o "Visite nosso site" abaixo dos dois bot√µes principais
  const btnComecar = Array.from(document.querySelectorAll('a,button'))
    .find(el => /come(√ß|c)ar agora|comece agora/i.test((el.textContent||'')));
  const btnSaiba   = document.getElementById('learnMoreBtn') ||
    Array.from(document.querySelectorAll('a,button'))
      .find(el => /saiba mais/i.test((el.textContent||'')));

  // cont√™iner flex dos bot√µes (se existir do patch anterior, reaproveita)
  let actions = document.querySelector('.hero-actions');
  if (!actions && (btnComecar || btnSaiba)){
    actions = document.createElement('div');
    actions.className = 'hero-actions';
    // insere logo abaixo do h1 se poss√≠vel; sen√£o, ao lado dos bot√µes
    const h1 = document.querySelector('h1, .title, .hero-title');
    if (h1 && h1.parentElement) h1.parentElement.appendChild(actions);
    else (btnComecar||btnSaiba).parentElement.appendChild(actions);
  }
  if (actions){
    if (btnComecar && btnComecar.parentElement !== actions) actions.appendChild(btnComecar);
    if (btnSaiba   && btnSaiba.parentElement   !== actions) actions.appendChild(btnSaiba);

    // cria o terceiro bot√£o logo abaixo do bloco dos dois
    const ext = document.createElement('a');
    ext.className = 'btn btn-outline external-link-btn';
    ext.href = 'https://linktr.ee/novoclubedenegociosSEBRAE?utm_source=qr_code';
    ext.target = '_blank';
    ext.rel = 'noopener';
    ext.textContent = 'Visite nosso site';

    // coloca logo depois do bloco de a√ß√µes
    actions.parentElement.insertBefore(ext, actions.nextSibling);
  }
});
</script>
<!-- MODAL LOGIN -->
<section aria-modal="true" class="modal-overlay" hidden="" id="login" role="dialog">
<div class="modal-card">
<h3 style="margin:0 0 12px;">Entrar</h3>
<label style="display:block; margin:8px 0 4px;">Seu e-mail</label>
<input id="loginEmail" placeholder="Seu e-mail" style="width:100%; padding:10px; border:1px solid #ccd; border-radius:10px;" type="email"/>
<label style="display:block; margin:12px 0 4px;">Sua senha</label>
<input id="loginPassword" placeholder="Sua senha" style="width:100%; padding:10px; border:1px solid #ccd; border-radius:10px;" type="password"/>
<div class="modal-actions">
<button class="btn btn-outline" id="loginCancelBtn" type="button">Cancelar</button>
<button class="btn btn-primary" id="loginSubmitBtn" type="button">Entrar</button>
</div>
<p id="loginError" style="color:#c00; margin-top:8px; display:none;">Erro ao entrar. Verifique e-mail/senha.</p>
</div>
</section>

<script id="visibility-guard">
(function(){
  function unhideAll(){
    var list = document.querySelectorAll('main, section[id], [data-section]');
    list.forEach(function(el){
      if (el){ el.hidden = false; if (el.style){ el.style.display = ""; } }
    });
  }
  // Em qualquer cen√°rio, assegura que nada fique permanentemente oculto
  document.addEventListener('DOMContentLoaded', unhideAll);
  window.addEventListener('hashchange', function(){ setTimeout(unhideAll, 0); });
})();
</script>

<script id="visibility-guard-ultimate">
(function(){
  function showAllExceptLogin(){
    var isLogin = (location.hash === '#login');
    try{
      var nodes = document.querySelectorAll(
        'main, section, [data-section], .screen, .view, .page, [id]'
      );
      nodes.forEach(function(el){
        var isLoginEl = (el.id === 'login') || el.classList.contains('modal-overlay');
        if (isLogin && isLoginEl) {
          // deixa o modal vis√≠vel; o script do modal controla isso
          return;
        }
        if (!isLoginEl){ el.hidden = false; if (el.style) el.style.display = ''; }
      });
      // Se n√£o √© a rota #login, garanta o modal oculto
      if (!isLogin){
        var dlg = document.getElementById('login');
        if (dlg){ dlg.hidden = true; if (dlg.style) dlg.style.display = 'none'; }
        document.body.style.overflow = '';
      }
    }catch(e){}
  }
  window.addEventListener('DOMContentLoaded', showAllExceptLogin);
  window.addEventListener('load', showAllExceptLogin);
  window.addEventListener('hashchange', function(){
    // debounce leve para n√£o entrar em loop de eventos encadeados
    setTimeout(showAllExceptLogin, 0);
  });
})();
</script>

<script id="login-modal-logic">
(function(){
  // helpers
  function $(s){ return document.querySelector(s); }
  function $all(s){ return Array.from(document.querySelectorAll(s)); }

  // telas gerenciadas pelo app (sem hash!)
  function setActive(id){
    var screens = $all('.screen');
    screens.forEach(function(el){
      var on = el.id === id;
      el.classList.toggle('active', on);
      el.style.display = on ? 'flex' : 'none';
    });
    // Se seu app tem renderizadores, chame-os com seguran√ßa
    try { if (typeof window.init === 'function') window.init(); } catch(_){}
    try { if (typeof window.renderProfile === 'function' && id==='profileScreen') window.renderProfile(); } catch(_){}
  }

  // elementos do modal
  var modal   = $('#login');
  var email   = $('#loginEmail');
  var pass    = $('#loginPassword');
  var err     = $('#loginError');
  var btnOpen = $('#loginBtn');            // bot√£o "Entrar" do topo
  var btnOk   = $('#loginSubmitBtn');      // "Entrar" no modal
  var btnNo   = $('#loginCancelBtn');      // "Cancelar" no modal

  function openModal(){
    if (!modal) return;
    modal.removeAttribute('hidden');
    document.body.style.overflow = 'hidden';
    if (err) err.style.display = 'none';
    if (email) email.focus();
  }
  function closeModal(){
    if (!modal) return;
    modal.setAttribute('hidden','');
    document.body.style.overflow = '';
    // N√ÉO mexe em location.hash, N√ÉO dispara hashchange
  }

  // Abertura/fechamento
  if (btnOpen)  btnOpen.addEventListener('click', function(e){ e.preventDefault(); openModal(); });
  if (btnNo)    btnNo.addEventListener('click',  function(e){ e.preventDefault(); closeModal(); });
  if (modal)    modal.addEventListener('click',   function(e){ if (e.target === modal) closeModal(); });

  // Login
  async function doLogin(){
    if (err) err.style.display = 'none';
    var mail = (email && email.value || '').trim();
    var pwd  = (pass  && pass.value  || '').trim();
    if (!mail || !pwd){
      if (err){ err.textContent = 'Preencha e-mail e senha.'; err.style.display = 'block'; }
      return;
    }
    try{
      if (!window.apiLogin) throw new Error('apiLogin n√£o encontrado');
      await window.apiLogin({ email: mail, password: pwd });

      // sucesso: fecha modal e mostra perfil (sem hash)
      closeModal();
      setActive('profileScreen');

      // opcional: emitir um evento para outros scripts ouvirem
      try { document.dispatchEvent(new CustomEvent('bm-login-success')); } catch(_){}

    }catch(e){
      if (err){ err.textContent = 'Credenciais inv√°lidas.'; err.style.display = 'block'; }
      console.warn(e);
    }
  }
  if (btnOk)   btnOk.addEventListener('click', doLogin);
  if (pass)    pass.addEventListener('keydown', function(e){ if (e.key === 'Enter') doLogin(); });

  // N√£o auto-abrir por hash; n√£o observar hashchange
})();
</script>

<script id="profile-hydrator">
(function(){
  function q(id){ return document.getElementById(id); }

  async function getMe(){
    try{
      var t = localStorage.getItem('bm_token');
      if(!t) return null;
      var r = await fetch('/api/me', { headers: { Authorization: 'Bearer '+t }});
      if(!r.ok) return null;
      var j = await r.json();
      return j && j.user ? j.user : null;
    }catch(e){ return null; }
  }

  function setActive(id){
    var found = false;
    document.querySelectorAll('.screen').forEach(function(el){
      var on = (el.id === id);
      el.classList.toggle('active', on);
      el.style.display = on ? 'flex' : 'none';
      if (on) found = true;
    });
    // Caso n√£o exista a section, n√£o esconda tudo
    if (!found) {
      document.querySelectorAll('.screen').forEach(function(el){
        el.classList.remove('active');
        el.style.display = '';
      });
    }
  }

  async function fillProfile(){
    var u = await getMe();
    window.currentUser = u;
    if(!u) return;
    if(q('name'))       q('name').value       = u.name || '';
    if(q('email'))      q('email').value      = u.email || '';
    if(q('phone'))      q('phone').value      = u.phone || '';
    if(q('company'))    q('company').value    = u.company || '';
    if(q('cnpj'))       q('cnpj').value       = u.cnpj || '';
    if(q('agenda_url')) q('agenda_url').value = u.agenda_url || '';
  }

  // Quando o login tiver sucesso (evento disparado no patch acima)
  document.addEventListener('bm-login-success', function(){
    setActive('profileScreen');
    fillProfile();
  });

  // Se o usu√°rio j√° cair em #perfil, garanta a tela e hidrate
  window.addEventListener('hashchange', function(){
    if (location.hash === '#perfil'){
      setActive('profileScreen');
      fillProfile();
    }
  });

  // Visita direta a #perfil
  if (location.hash === '#perfil') {
    setActive('profileScreen');
    fillProfile();
  }
})();
</script>

<script id="bm-router-hydrator">
(function(){
  // util: ativa uma tela .screen por id e desativa as outras
  function setActive(id){
    var found = false;
    document.querySelectorAll('.screen').forEach(function(el){
      var on = (el.id === id);
      el.classList.toggle('active', on);
      el.style.display = on ? 'flex' : 'none';
      if(on) found = true;
    });
    // Se a tela-alvo n√£o existe, n√£o esconda tudo
    if(!found){
      document.querySelectorAll('.screen').forEach(function(el){
        el.classList.remove('active');
        el.style.display = '';
      });
    }
  }

  // map de hash -> id real da section
  function mapHashToScreen(h){
    if (!h) return 'welcomeScreen';
    if (h === '#perfil') return 'profileScreen';
    if (h === '#register') return 'authScreen';
    if (h === '#home') return 'welcomeScreen';
    return null; // deixa outra l√≥gica cuidar
  }

  // hidrata perfil e atualiza window.currentUser
  async function hydrateProfile(){
    try{
      var t = localStorage.getItem('bm_token');
      if(!t) return null;
      var r = await fetch('/api/me', { headers: { Authorization: 'Bearer '+t }});
      if(!r.ok) return null;
      var j = await r.json();
      var u = j && j.user ? j.user : null;
      if(!u) return null;

      window.currentUser = u; // <- evita null em scripts legados
      try{
        var q = function(id){ return document.getElementById(id); };
        if(q('name'))       q('name').value       = u.name || '';
        if(q('email'))      q('email').value      = u.email || '';
        if(q('phone'))      q('phone').value      = u.phone || '';
        if(q('company'))    q('company').value    = u.company || '';
        if(q('cnpj'))       q('cnpj').value       = u.cnpj || '';
        if(q('agenda_url')) q('agenda_url').value = u.agenda_url || '';
      }catch{}
      document.dispatchEvent(new Event('bm-profile-updated'));
      return u;
    }catch(e){ return null; }
  }

  // router m√≠nimo por hash, respeitando o modal #login
  function route(){
    if (location.hash === '#login') return; // modal controla
    var target = mapHashToScreen(location.hash);
    if (target) setActive(target);
  }

  window.addEventListener('hashchange', route);
  window.addEventListener('DOMContentLoaded', route);

  // integra com o fluxo de login j√° existente:
  //  - depois do apiLogin: vai para #perfil, ativa profileScreen e hidrata
  document.addEventListener('bm-login-success', function(){
    if (location.hash !== '#perfil') location.hash = '#perfil';
    setActive('profileScreen');
    hydrateProfile();
  });

  // visita direta a #perfil: ativa e hidrata
  if (location.hash === '#perfil'){
    setActive('profileScreen');
    hydrateProfile();
  }
})();
</script>

        <script id="router-override">
(function(){
  // util: ativa UMA tela pela classe .active (sem mexer em style.display diretamente)
  function setActive(id){
    var found = false;
    document.querySelectorAll('.screen').forEach(function(el){
      var on = el.id === id;
      el.classList.toggle('active', on);
      if(on) found = true;
    });
    // fallback: se id n√£o existir, garante pelo menos a welcome vis√≠vel
    if(!found){
      var w = document.getElementById('welcomeScreen');
      if(w) w.classList.add('active');
    }
  }

  // modal helpers (n√£o tocam nas telas .screen)
  function openLogin(){
    var dlg = document.getElementById('login');
    if(dlg){
      dlg.hidden = false;
      if (dlg.style) dlg.style.display = ''; // deixa o CSS do modal atuar
    }
  }
  function closeLogin(){
    var dlg = document.getElementById('login');
    if(dlg){
      dlg.hidden = true;
      if (dlg.style) dlg.style.display = 'none';
    }
  }

  // wire no modal existente
  var modal      = document.getElementById('login');
  var btnOpen    = document.getElementById('loginBtn');
  var btnCancel  = document.getElementById('loginCancelBtn');
  var btnSubmit  = document.getElementById('loginSubmitBtn');
  var pass       = document.getElementById('loginPassword');

  if (btnOpen)   btnOpen.onclick = function(e){ e.preventDefault(); openLogin(); };
  if (btnCancel) btnCancel.onclick = function(e){ e.preventDefault(); closeLogin(); setActive('welcomeScreen'); history.replaceState(null,'',location.pathname+location.search+'#home'); };
  if (modal)     modal.addEventListener('click', function(e){ if (e.target === modal){ closeLogin(); setActive('welcomeScreen'); history.replaceState(null,'',location.pathname+location.search+'#home'); } });

  // enter no campo senha tamb√©m envia
  if (pass) pass.addEventListener('keydown', function(e){ if(e.key==='Enter' && btnSubmit){ btnSubmit.click(); } });

  // p√≥s-login: quando clicarem em "Entrar" no modal, espere o token e v√° para o perfil
  document.addEventListener('click', function(e){
    if ((e.target && e.target.id) !== 'loginSubmitBtn') return;
    // pequeno delay p/ API salvar token
    setTimeout(function(){
      try{
        var t = localStorage.getItem('bm_token') || localStorage.getItem('token') || '';
        if (t && t.length > 10){
          closeLogin();
          setActive('profileScreen');
          // reidrata se existirem
          if (typeof window.renderProfile === 'function') { try{ window.renderProfile(); }catch(_){ } }
          if (typeof window.init === 'function') { try{ window.init(); }catch(_){ } }
          history.replaceState(null,'',location.pathname+location.search+'#perfil');
        }
      }catch(_){}
    }, 300);
  });

  // guarda simples do hash no primeiro load (n√£o for√ßa login)
  window.addEventListener('DOMContentLoaded', function(){
    var h = (location.hash || '').replace('#','');
    if (h === 'perfil') setActive('profileScreen');
    else if (h === 'oportunidades') setActive('opportunitiesScreen');
    else if (h === 'matches') setActive('matchesScreen');
    else if (h === 'interesses') setActive('interestsScreen');
    else if (h === 'admin') setActive('adminScreen');
    else if (h === 'cadastrar' || h === 'auth') setActive('authScreen');
    else setActive('welcomeScreen');
  });

  // opcional: quando o hash muda, s√≥ alterna telas (sem mexer em modal)
  window.addEventListener('hashchange', function(){
    var h = (location.hash || '').replace('#','');
    var map = {
      'perfil':'profileScreen',
      'oportunidades':'opportunitiesScreen',
      'matches':'matchesScreen',
      'interesses':'interestsScreen',
      'admin':'adminScreen',
      'cadastrar':'authScreen',
      'auth':'authScreen',
      'home':'welcomeScreen',
      'welcome':'welcomeScreen'
    };
    setActive(map[h] || 'welcomeScreen');
  });
})();
</script>    
</body>
</html>
